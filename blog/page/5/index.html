<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Rahul Nath</title>
  <meta name="author" content="Rahul Nath">

  
<meta name="description" content="Rahul Nath is a programmer, blogger, speaker and enjoys running. Blogs are usually technical or about life in general." />


<meta name="keywords" content=".NET, programming, rahul nath, rahul, C#" />

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rahulpnath.com/blog/page/5">
  
<!-- Favicon -->
  <link href="/favicon.png" type="image/png" rel="icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
<!-- End Favicon -->
  <link href="http://feeds2.feedburner.com/rahulpnath" rel="alternate" title="Rahul Nath" type="application/atom+xml">

  <!-- Social media content metadata -->


<meta property="fb:admins" content="774780093" />
<meta property="og:title" content="Rahul Nath" />
<meta property="og:site_name" content="Rahul Nath" />
<meta property="og:url" content="http://rahulpnath.com/blog/page/5/" />
<meta property="og:description" content="Rahul Nath is a programmer, blogger, speaker and enjoys running. Blogs are usually technical or about life in general." />
<meta property="og:author" content="https://www.facebook.com/774780093" />



<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:site" content="rahulpnath" />
<meta property="twitter:url" content="http://rahulpnath.com/blog/page/5" />
<meta property="twitter:title" content="Rahul Nath" />
<meta property="twitter:description" content="Rahul Nath is a programmer, blogger, speaker and enjoys running. Blogs are usually technical or about life in general." />
<meta property="twitter:creator" content="rahulpnath" />


<script src="/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-43172163-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Rahul Nath</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
                <li >
                    <a href="/apps">Apps</a>
                </li>
                <li >
                    <a href="/about">About</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="http://feeds2.feedburner.com/rahulpnath" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="http://google.com/cse" method="GET">
                    <input type="hidden" name="cx" value="013909293779229500224:v37rx6hsidk" />
                    <input name="ie" type="hidden" value="UTF-8">
                    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="Rahul Nath" />
    <meta itemprop="description" content="Rahul Nath is a programmer, blogger, speaker and enjoys running. Blogs are usually technical or about life in general." />
    <meta itemprop="url" content="http://rahulpnath.com" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-07-13T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jul 13<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/tipow/'>tipow</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/beyond-compare-compare-files-quick-and-easy/" itemprop="url">Tip of the Week: Beyond Compare - Compare Files Quick and Easy</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Merging conflicts can be a pain when working in large teams and code bases change fast. Every time you sync with the main code base you need to make sure that you integrate the updates with your work in progress. It&rsquo;s great when the changes get automatically merged by the source control systems. But when things need to be manually merged is where a good tool can be of help.</p>

<p><img src="/images/beyond_compare.png" class="center" alt="Beyond Compare"></p>

<blockquote><p><em><a href="http://www.scootersoftware.com/index.php">Beyond Compare</a> allows you to quickly and easily compare your files and folders.  By using simple, powerful commands, you can focus on the differences you&rsquo;re interested in and ignore those you&rsquo;re not.  You can then merge the changes, synchronize your files, and generate reports for your records.</em></p></blockquote>

<p>The <a href="http://www.scootersoftware.com/features.php?zz=features_multifaceted">Text Compare</a> viewer is the one that I use most frequently to compare or merge different versions of code. Beyond Compare makes it easy to spot the code differences and gives the capability to copy the code from one version to another. One can also copy portions of changes and merge just that instead of all the changes. The 3-Way Text Merge feature is also useful, especially when you are using Git.</p>

<p>Beyond Compare has a Standard and a Pro Edition with a lot of <a href="http://www.scootersoftware.com/features.php?zz=features_list">features</a>. I have the Pro Edition license for Beyond Compare, thanks to <a href="http://www.rahulpnath.com/blog/finding-a-job-abroad/">Readify</a> for the Software allowance that you get every year.</p>

<p>Beyond Compare is one of the <a href="http://www.rahulpnath.com/blog/tools-that-I-use/">tools that I use almost daily</a>. Check it out if you have not already.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-07-12T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jul 12<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/gadgets/'>gadgets</a>, <a class='category' href='/blog/category/review/'>review</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/review-pixel/" itemprop="url">Review: Pixel, Phone by Google - Made by Google</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>When it comes to mobile phones, I used to be a gadget freak and buy the latest phone as soon as it arrives in the market. But not after I got the <a href="http://www.rahulpnath.com/blog/review-two-months-and-counting-android-and-nexus-5/">Nexus 5</a>. It&rsquo;s been well over three years now and not even once did I want to switch over to something else. The phone never slowed down over these years, and the battery lasted enough for the day. I broke the Nexus screen a couple of months back and was forced to switch over to a new phone. I didn&rsquo;t have to do much market research or phone comparisons this time; as I just knew which one to pick up.</p>

<p><a href="https://madeby.google.com/intl/en_au/phone/">The Pixel, Phone By Google!</a></p>

<p><img src="/images/pixel.png" alt="Pixel" class="center" /></p>

<h4><strong>Key Features</strong></h4>

<p>The Pixel is the first phone in the Google Pixel hardware line and is a successor to the Nexus range of devices. The Pixel runs <a href="https://www.android.com/intl/en_au/versions/nougat-7-0/">Android-Nougat</a> with some features exclusive to it. The Pixel is very much comparable to the Nexus, with improved hardware and latest software. Below are some of the key features that I like about the phone.</p>

<ul>
<li><p><strong>Fingerprint sensor</strong> The fingerprint sensor on the back allows you to unlock the phone and specific apps and also authorize purchases. <a href="http://www.rahulpnath.com/blog/password-manager-get-one-if-you-havent-already/">1Password</a> is integrated with the sensor which enables me to unlock it using the sensor. I no longer need to type in my long master password every time I use 1Password.</p></li>
<li><p><strong>Camera</strong> <em>Pixel takes brilliant photos in bright light, low light, and any light.</em> The camera is awesome and at times is a good replacement for your <a href="http://www.rahulpnath.com/blog/photography-learning-to-click/">DSLR</a>. With Pixel, Google also provides unlimited original quality storage for all photos and videos.</p></li>
<li><p><strong>Google Assistant</strong> Pixel is the first phone with the <a href="https://assistant.google.com/">Google Assistant</a> built-in. It helps you manage tasks, find content on phone and the internet, perform actions, etc. just like Siri or Cortana. I have not used the assistant much and yet to find some valid use cases.</p></li>
</ul>


<h4><strong>Apps</strong></h4>

<p> Some of the apps that I use regularly are</p>

<ul>
<li><a href="http://www.rahulpnath.com/blog/todoist-manage-your-todo-list/">Todoist</a>: My ToDo List</li>
<li><a href="http://www.rahulpnath.com/blog/feedly-one-stop-reading-place/">Feedly</a>: For all my RSS feeds</li>
<li><a href="http://www.rahulpnath.com/blog/pocket-offline-reading-made-easy/">Pocket</a>: For offline reading and read later</li>
<li><a href="http://www.rahulpnath.com/blog/password-manager-get-one-if-you-havent-already/">1Password</a>: Password Manager</li>
<li><a href="http://www.rahulpnath.com/blog/buffer-smarter-social-sharing/">Buffer</a>: To schedule articles to all social networks</li>
<li><a href="http://www.rahulpnath.com/blog/rescue-time-track-your-time/">Rescue Time</a>: Automatically tracks where I spent time on mobile</li>
<li><a href="http://www.rahulpnath.com/blog/three_months_to_a_half_marathon/">Strava, Runtastic &amp; Garmin Connect</a>: Tracking my runs and exercises</li>
<li><a href="https://play.google.com/store/apps/details?id=com.amazon.kindle">Kindle</a>: Reading kindle books</li>
<li>Twitter, Whatsapp, Messenger, Instagram, Skype &amp; Yammer :Social Networking apps</li>
<li><a href="http://www.rahulpnath.com/blog/optimizing-octopress-workflow-for-new-posts/">JotterPad</a>: Write articles for blog in markdown format</li>
<li><a href="http://www.rahulpnath.com/blog/how-to-setup-google-indic-keyboard-on-your-android-phone/">Google Indic Keyboard</a>: Writing in my native language</li>
<li>Gmail &amp; Outlook: Emails</li>
<li>Youtube: Videos</li>
</ul>


<h4><strong>Case </strong></h4>

<p>I am using the <a href="http://www.rahulpnath.com/blog/spigen-awesome-phone-cases/">Spigen Neo Hybrid</a> case for Pixel. It adds extra weight to the phone, but I am used to it from my Nexus as well. The Neo Hybrid provides military grade protection and protects the phone from most falls.</p>

<p>Overall I have found the Pixel a good phone and recommend it to anyone looking out for a new phone now. The Samsung Galaxy S8 is also of the same range (slightly costlier) and worth considering if you are not too particular about having a vanilla Android experience. Which phone do you use?</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-07-07T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jul 7<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/tipow/'>tipow</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/grammarly-improve-your-writing/" itemprop="url">Tip of the Week: Grammarly - Improve Your Writing</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p><a href="https://www.grammarly.com/">Grammarly</a> is a writing platform that helps you polish your writing. Grammarly scans your text for mistakes based on pre-written rules and suggests modifications. A detailed explanation is given on the suggestions made and helps improve your writing over a period.</p>

<blockquote><p><em>Grammarly makes sure everything you type is clear, effective, and mistake-free.</em></p></blockquote>

<p>With the <a href="https://chrome.google.com/webstore/detail/grammarly-for-chrome/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en">chrome plugin, Grammarly</a> is there everywhere that you write on the web. It hides away neatly to a corner without getting in the way of your writing.</p>

<p><img src="/images/grammarly_facebook.png" alt="Grammarly Chrome plugin" class ="center" /></p>

<p>You can author text either in the website, or have Grammarly watch your back as you type anywhere in Chrome with the plugin, integrate it with Microsoft Office or use the Windows app. Check out the <a href="https://app.grammarly.com/apps">apps section</a> to get more details. You can try Grammarly for free and check for critical grammar and spelling mistakes. With the <a href="https://www.grammarly.com/premium">premium version</a> you get a lot more features and grammar rules. Currently, I am on the premium version and recommend it.</p>

<p>Try <a href="https://www.grammarly.com/i/personalize?install=true">Grammarly for free</a> and see if it helps you as well.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-07-03T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jul 3<sup>rd</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/productivity/'>productivity</a>, <a class='category' href='/blog/category/programming/'>programming</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/left-align-your-code-for-better-readability/" itemprop="url">Left Align Your Code For Better Readability</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Aesthetics of code is as important as the code you write. Aligning is an important part that contributes to the overall aesthetics of code. The importance of code aesthetics struck me while on a recent project. Below are some the code samples that I came across in the project. Traversing this code base was painful to me as the code was all over the place.</p>

<figure class='code'><figcaption><span>Bad Formatting</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Account</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span>   <span class="n">Id</span>                    <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">ClientId</span>              <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span>   <span class="n">ContactId</span>             <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">UserName</span>              <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span>                  <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Company</span>               <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Address</span>               <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">BillingAddress</span>        <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Bad Formatting</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">ConnectToServer</span><span class="p">(</span><span class="kt">string</span> <span class="n">username</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">password</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">server</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code has too many alignment points that attract the eye which makes it hard to read in the first place. When in isolation this might still be fine to read, but with such a style across the code base, it soon becomes a pain for your eyes and your mind. When refactoring code, it becomes even harder as you need to put in the extra effort to make sure that this fancy alignment is maintained. Let&rsquo;s take a look at how even changing a property name (<em>Company to CompanyName</em>) or function name(<em>ConnectToServer to Connect</em>) will affect the current formatting.</p>

<figure class='code'><figcaption><span>Renamed to CompanyName</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Account</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span>              <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">CompanyName</span>           <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Address</span>           <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Renamed to Connect</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">Connect</span><span class="p">(</span><span class="kt">string</span> <span class="n">username</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">password</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">server</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see above the formatting is now all over the place, and you need to format them into place manually. Again when in isolation this might seem like a few press of spacebar. But when the property/function that you rename is used in multiple places this soon becomes a problem. Such code formatting introduces maintenance overhead and soon falls out of place if something gets missed.</p>

<h3>Better Ways To Format Code</h3>

<p>Left aligning code is one of the key things that I try to follow always. Keeping the code aligned to the left makes it easier to read (assuming that you are programming in a language written from left to right). Since we read from left to right having most of the code aligned to the left means that you have more code visible. Left aligning also means that you would almost avoid the need to scroll the code editor when reading through the code horizontally.</p>

<p>Let&rsquo;s take a look how left aligning the above code will look like.</p>

<figure class='code'><figcaption><span>Left Aligned</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Account</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">ClientId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span> <span class="n">ContactId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">UserName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Company</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Address</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">BillingAddress</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Left Aligned Multiple Lines</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">ConnectToServer</span><span class="p">(</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">username</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">password</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">server</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Left Aligned Single Line</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">ConnectToServer</span><span class="p">(</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">username</span><span class="p">,</span> <span class="kt">string</span> <span class="n">password</span><span class="p">,</span> <span class="kt">string</span> <span class="n">server</span><span class="p">,</span> <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see above left aligning makes it much easier to read and also reduces the number of alignment points. This is also refactoring friendly as there are no specific space patterns that need to be maintained. As for the parameters in a single line VS parameters in multiple lines (as above), I prefer the multi-line approach, as it keeps the code further aligned to the left and also reduces the chance of getting a horizontal scroll bar. You can use <a href="http://www.rahulpnath.com/blog/introducing-code-formatting-into-a-large-codebase/">Column Guides</a> to remind yourself to keep the code within the acceptable horizontal space.</p>

<p>Code formatting is an important aspect of coding. It is important that as a team you need to agree on some standard practices and find ways to stick to it. You can use <a href="http://www.rahulpnath.com/blog/introducing-code-formatting-into-a-large-codebase/">styling tools</a>, <a href="http://www.rahulpnath.com/blog/code-review/">Code Reviews</a>, etc. to make sure it does not get missed. It takes a while for any new practices to set in, but soon it will be of second nature and easy to follow.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-06-29T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jun 29<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/tipow/'>tipow</a>, <a class='category' href='/blog/category/tools/'>tools</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/fiddler-free-web-debugging-proxy/" itemprop="url">Tip of the Week: Fiddler - Free Web Debugging Proxy</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p><a href="http://www.telerik.com/fiddler">Fiddler</a> is an HTTP debugging proxy server application and captures HTTP and HTTPS traffic. It is one of the tools in my <a href="http://www.rahulpnath.com/blog/tools-that-I-use/">essential toolkit list</a>. Fiddler allows debugging traffic from PC, MAC, Linux and mobile systems. It helps inspect the raw requests and responses between the client and the server.</p>

<p><img src="/images/fiddler_inspectors.png" alt="Fiddler" class="center" ></p>

<p>Some of the key features that I often use in Fiddler are</p>

<ul>
<li><p><a href="http://docs.telerik.com/fiddler/Observe-Traffic/Tasks/ViewSessionContent">Inspect Request/Response</a>
Look into the request and response data to see if all the required headers/attributes are set, and the data is sent as expected</p></li>
<li><p><a href="http://www.rahulpnath.com/blog/using-fiddler-to-help-in-manual-testing/">Compose Web Requests</a>
Manually compose requests to send to server and test endpoints.</p></li>
<li><p><a href="http://www.rahulpnath.com/blog/simulating-delays-in-http-calls-for-manual-tests/">AutoRespond to Requests</a>
Intercept requests from the browser and send back a pre-defined response or create a delay in response to the actual client.</p></li>
<li><p><a href="http://docs.telerik.com/fiddler/Observe-Traffic/Tasks/ViewSessionStatistics">Statistics</a>
Fiddler statistics give an overview of the performance details of a web session, indicating where the time is spent in the whole request/response cycle.</p></li>
<li><p><a href="http://docs.telerik.com/fiddler/Generate-Traffic/Tasks/ResendRequest">Modify and Replay a Request</a>
Fiddler allows modifying the request by editing its contents and replay the message to the server.</p></li>
<li><p><a href="http://docs.telerik.com/fiddler/Save-And-Load-Traffic/Tasks/CreateSAZ">Export and Import</a>
Fiddler makes it easy to share captured traces with different people. All captured traffic or selected requests can be exported and shared with others. The exported saz file can be opened in Fiddler to view back all the session details.</p></li>
</ul>


<p>These are some of the features that I use on a regular basis. Fiddler supports a lot more and is extensible to support custom requirements as well. I find it an indispensable tool when developing for the Web. <a href="https://www.telerik.com/download/fiddler">Get Fiddler</a> if you have not already.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-06-21T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jun 21<sup>st</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/productivity/'>productivity</a>, <a class='category' href='/blog/category/programming/'>programming</a>, <a class='category' href='/blog/category/tipow/'>tipow</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/using-git-locally-in-a-tfvc-repository/" itemprop="url">Tip of the Week: Using Git Locally in a TFVC Repository</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>The project that I am currently working on using <a href="https://www.visualstudio.com/en-us/docs/tfvc/overview">Team Foundation Version Control</a>(TFVC) as it&rsquo;s source control. After <a href="http://www.rahulpnath.com/blog/git-checkout-tfs/">using Git</a> for a long time it felt hard to move back to TFVC. One of the biggest pain for me is losing the short commits that I do when working. Short commits help keep track of the work and also quickly revert unwanted changes. Branching is also much easier with Git and allows to switch between work without much hassle of &lsquo;<em>shelving -> undoing -> pulling back the latest as with TFS.</em>&rsquo;</p>

<p><img src="/images/tfvc_local_git.png" alt="Use Git Locally in a TFVC Repository" class="center" /></p>

<p>The best part with git is that you can use it to work with any folder in your system and does not need any setup. By just running &lsquo;<em><a href="https://git-scm.com/docs/git-init">git init</a></em>&rsquo; it initializes a git repository in the folder. Running <em>init</em> against my local TFVC source code folder, I initialized a git repository locally. Now it allows me to work locally using git - make commits, revert, change branches, etc. Whenever I reach a logical end to the work, I create a shelveset and push the changes up the TFVC source control from Visual Studio.</p>

<p>If you want to interact with the TFVC source control straight from the command line, you can try out <a href="https://github.com/git-tfs/git-tfs">git-tfs</a> - a Git/TFS bridge. For me, since I am happy working locally with git and pushing up the finished work as shelvesets from Visual Studio I have not explored the git-tfs tool.</p>

<p>Hope this helps someone if you feel stuck with TFVC repositories!</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-06-20T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jun 20<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/tdd/'>tdd</a>, <a class='category' href='/blog/category/testing/'>testing</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/semantic-comparison-improve-test-assertions/" itemprop="url">Semantic Comparison: Improve Test Assertions</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>One of the traits of a good unit test is to have just <a href="http://osherove.com/blog/2005/4/14/try-to-avoid-multiple-asserts-in-a-single-unit-test.html">one Assert statement.</a>.</p>

<blockquote><p><em>Consider Assert failures as symptoms of a disease and Asserts as indication points or blood checks for the body of the software. The more symptoms you can find, the easier the disease will be to figure out and remove. If you have multiple asserts in one test - only the first failing one reveals itself as failed and you lose sight of other possible symptoms.</em></p>

<p>-<a href="http://osherove.com/">Roy Osherove</a></p></blockquote>

<p>When a test with multiple asserts fails, it is hard to tell the exact reason of test failure. To get more details on the actual failure we either have to debug the tests or look into the stack trace.</p>

<h3>Tests With Multiple Assertions</h3>

<p>Many times we end up needing to assert on more than one properties or behavior. Let&rsquo;s look at a few such examples and see how we can refactor the tests. <em>I have excluded the actual code that is getting is tested here as it is easy to understand what that will look like from the tests. (Drop a comment otherwise)</em></p>

<p><strong>Example 1:</strong> In the below test we have a <em>Name</em> class that represents FirstName and LastName of a user. It exposes a <em>Parse</em> method to make it easy for us to create a Name object from a string. Below are some tests for the Parse method. The test has multiple assertions to confirm that the first and last name properties get set as expected.</p>

<figure class='code'><figcaption><span>Name class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul&quot;, &quot;Rahul&quot;, &quot;&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul Nath&quot;, &quot;Rahul&quot;, &quot;Nath&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul P Nath&quot;, &quot;Rahul&quot;, &quot;P Nath&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">FirstNameOnlyProvidedResultsInFirstNameSet</span><span class="p">(</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">name</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expFirstName</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expLastName</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">Name</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">expFirstName</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">FirstName</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">expLastName</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">LastName</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 2:</strong> The below test is for the <em>Controller</em> class to confirm that the <em>CustomerViewModel</em> passed to the <em>Post</em> method on the controller saves the <em>Customer</em> to the repository. The assert statement includes multiple properties of the customer object, which is just a shorthand version of writing multiple such assert statements on each of those properties.</p>

<figure class='code'><figcaption><span>Controller Unit Test</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory, AutoWebData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">PostSavesToRepository</span><span class="p">(</span>
</span><span class='line'>    <span class="n">CustomerViewModel</span> <span class="n">model</span><span class="p">,</span>
</span><span class='line'><span class="na">    [Frozen]</span><span class="n">Mock</span><span class="p">&lt;</span><span class="n">ICustomerRepository</span><span class="p">&gt;</span> <span class="n">customerRepository</span><span class="p">,</span>
</span><span class='line'>    <span class="n">CustomerController</span> <span class="n">sut</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">var</span> <span class="n">expected</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ToCustomer</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sut</span><span class="p">.</span><span class="n">Post</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">customerRepository</span><span class="p">.</span><span class="n">Verify</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span>
</span><span class='line'>    <span class="n">a</span><span class="p">.</span><span class="n">Upsert</span><span class="p">(</span><span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;(</span><span class="n">customer</span> <span class="p">=&gt;</span>
</span><span class='line'>        <span class="n">customer</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="n">expected</span><span class="p">.</span><span class="n">Name</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>        <span class="n">customer</span><span class="p">.</span><span class="n">Age</span> <span class="p">==</span> <span class="n">expected</span><span class="p">.</span><span class="n">Age</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>        <span class="n">customer</span><span class="p">.</span><span class="n">Phone</span> <span class="p">==</span> <span class="n">customer</span><span class="p">.</span><span class="n">Phone</span><span class="p">))</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 3:</strong> The below test ensures that all properties are set when transforming from DTO to domain entity (or any such object transformations at system boundaries). The test asserts on every property of the class.</p>

<figure class='code'><figcaption><span>Comparing different object types</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[AutoMoqData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">AllowanceToDomainModelMapsAllProperties</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Persistence</span><span class="p">.</span><span class="n">Allowance</span> <span class="n">allowance</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">random</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">allowance</span><span class="p">.</span><span class="n">EndDate</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">StartDate</span><span class="p">.</span><span class="n">AddDays</span><span class="p">(</span><span class="n">random</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">ToDomainModel</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">ClientId</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">ClientId</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">Credit</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Credit</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">Data</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">StartDate</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">StartDate</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">EndDate</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">EndDate</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Semantic Comparison Library</h3>

<p><a href="https://www.nuget.org/packages/SemanticComparison/">Semantic Comparison</a> is a library that allows deep comparison of similar looking objects. Originally part of <a href="http://www.rahulpnath.com/blog/autofixture-make-your-unit-tests-robust/">AutoFixture</a> library, it is also available as a separate <a href="https://www.nuget.org/packages/SemanticComparison/">Nuget package</a>.</p>

<blockquote><p><em>SemanticComparison makes it easier to compare instances of various objects to each other. Instead of performing a normal equality comparison, SemanticComparison compares objects that look semantically similar - even if they are of different types</em></p></blockquote>

<p>Using SemanticComparison, we can compare two objects and compare their properties for equality. It allows including/excluding properties when comparing objects.</p>

<h3>Refactoring Tests</h3>

<p><strong>Example 1:</strong> The <em>Name</em> is a perfect case for being a <a href="http://www.rahulpnath.com/blog/thinking-beyond-primitive-values-value-objects/">Value Object</a>. In this case, the class will override Equals, and it will be easier for us to write the tests. Converting to a Value Object is one of the cases where we <a href="http://www.rahulpnath.com/blog/tests-as-a-feedback-tool/">use tests as a feedback to improve code</a>. But in cases where you do not have the control over the class or do not want to make it a value object, we can use SemanticComparison to help check for equality as shown below.</p>

<figure class='code'><figcaption><span>Name Class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul&quot;, &quot;Rahul&quot;, &quot;&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul Nath&quot;, &quot;Rahul&quot;, &quot;Nath&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul P Nath&quot;, &quot;Rahul&quot;, &quot;P Nath&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">FirstNameOnlyProvidedResultsInFirstNameSet</span><span class="p">(</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">name</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expFirstName</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expLastName</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">expected</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Name</span><span class="p">(</span><span class="n">expFirstName</span><span class="p">,</span> <span class="n">expLastName</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">Name</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">expected</span>
</span><span class='line'>        <span class="p">.</span><span class="n">AsSource</span><span class="p">()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">OfLikeness</span><span class="p">&lt;</span><span class="n">Name</span><span class="p">&gt;()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">ShouldEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 2:</strong>  Using SemanticComparison we can remove the need of asserting on each of the properties. In the below case since the Customer Id is set to a new Guid in the ToCustomer method, I ignore the Id property from the comparison using <em>Without</em>. When the <em>expected</em> objects gets compared against the <em>actual</em> all properties except <em>Id</em> will be compared for equality. Any number of properties can be excluded by chaining multiple <em>Without</em> methods.</p>

<figure class='code'><figcaption><span>Controller Unit Test</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory, AutoWebData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">PostSavesToRepository</span><span class="p">(</span>
</span><span class='line'>    <span class="n">CustomerViewModel</span> <span class="n">model</span><span class="p">,</span>
</span><span class='line'><span class="na">    [Frozen]</span><span class="n">Mock</span><span class="p">&lt;</span><span class="n">ICustomerRepository</span><span class="p">&gt;</span> <span class="n">customerRepository</span><span class="p">,</span>
</span><span class='line'>    <span class="n">CustomerController</span> <span class="n">sut</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">var</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ToCustomer</span><span class="p">();</span>
</span><span class='line'>  <span class="kt">var</span> <span class="n">expected</span> <span class="p">=</span> <span class="n">customer</span>
</span><span class='line'>      <span class="p">.</span><span class="n">AsSource</span><span class="p">()</span>
</span><span class='line'>      <span class="p">.</span><span class="n">OfLikeness</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;()</span>
</span><span class='line'>      <span class="p">.</span><span class="n">Without</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sut</span><span class="p">.</span><span class="n">Post</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">customerRepository</span><span class="p">.</span><span class="n">Verify</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span>
</span><span class='line'>    <span class="n">a</span><span class="p">.</span><span class="n">Upsert</span><span class="p">(</span><span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;(</span><span class="n">actual</span> <span class="p">=&gt;</span>
</span><span class='line'>        <span class="n">expected</span><span class="p">.</span><span class="n">ShoudEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">)));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 3:</strong>  Using SemanticComparison we can remove the asserts on every property and also set custom comparisons. The StartDate and EndDate on the persistence entity are converted into a DateRange object (Period). By using the <em>With</em> method in combination with the <em>EqualsWhen</em> method we can set custom comparison behavior that needs to be performed when comparing objects. The same test will hold true even if we add new properties and will force mapping to be updated if any of the property mappings is missed. Here we also see how SemanticComparison can compare two different types.</p>

<figure class='code'><figcaption><span>Comparing different object types</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[AutoMoqData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">AllowanceToDomainModelMapsAllProperties</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Persistence</span><span class="p">.</span><span class="n">Allowance</span> <span class="n">allowance</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">random</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">allowance</span><span class="p">.</span><span class="n">EndDate</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">StartDate</span><span class="p">.</span><span class="n">AddDays</span><span class="p">(</span><span class="n">random</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">ToDomainModel</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">allowance</span>
</span><span class='line'>        <span class="p">.</span><span class="n">AsSource</span><span class="p">()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">OfLikeness</span><span class="p">&lt;</span><span class="n">Allowance</span><span class="p">&gt;()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">With</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">Period</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="n">EqualsWhen</span><span class="p">((</span><span class="n">p</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">StartDate</span> <span class="p">==</span> <span class="n">p</span><span class="p">.</span><span class="n">StartDate</span> <span class="p">&amp;&amp;</span> <span class="n">m</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">EndDate</span> <span class="p">==</span> <span class="n">p</span><span class="p">.</span><span class="n">EndDate</span><span class="p">;</span> <span class="p">})</span>
</span><span class='line'>        <span class="p">.</span><span class="n">ShouldEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using SemanticComparison library, we reduce the dependencies on the actual implementation and extract that into a more generic representation. Fewer dependencies on the actual implementation code/properties make the tests more robust and adaptable to change. Hope this helps you get started with Semantic Comparison and improve on your test assertions.</p>

<p><strong>References:</strong></p>

<ul>
<li><a href="http://blog.ploeh.dk/2012/06/21/TheResemblanceidiom/">The Resemblance Idiom</a></li>
<li><a href="http://blog.ploeh.dk/2010/06/29/IntroducingAutoFixtureLikeness/">Introducing AutoFixture Likeness</a></li>
<li><a href="http://blog.ploeh.dk/2012/06/22/ResemblanceandLikeness/">Resemblance and Likeness</a></li>
</ul>

</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-06-15T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jun 15<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/gadgets/'>gadgets</a>, <a class='category' href='/blog/category/review/'>review</a>, <a class='category' href='/blog/category/tipow/'>tipow</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/spigen-awesome-phone-cases/" itemprop="url">Tip of the Week: Spigen - Awesome Phone Cases</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>If you are looking to get a case for your phone, then check out cases by <a href="https://www.spigen.com/">Spigen</a>. I have been using Spigen cases for over three years, and I totally recommend it.</p>

<p>Spigen cases are made with premium materials and are slim, sleek and simple. Spigen provides various models that match different needs. The cases provide <a href="https://www.spigen.com/pages/military-grade">Military Grade Protection</a> and protect the phone from most falls.</p>

<p>The first Spigen cases I got was for my <a href="http://www.rahulpnath.com/blog/review-two-months-and-counting-android-and-nexus-5/">Nexus 5</a>. The Neo Hybrid lasted for over three years. With the Spigen cases, the Nexus was well protected. It did fall from my hands many times, and every time the case protected it well enough. A couple of months back the Spigen case broke, and I had been using the phone without a cover since then. Unfortunately, during one of my <a href="http://www.rahulpnath.com/blog/three_months_to_a_half_marathon/">morning runs</a> the phone fell from my hands while slipping it into the armband. Without the Spigen to protect it, the Nexus screen broke at the corners.</p>

<p><img src="/images/spigen_pixel.png" alt="Spigen Neo Hybrid for Pixel" class="center" /></p>

<p>A month back I switched over to Google Pixel as the Nexus was becoming unusable with the broken screen. I got the <a href="https://www.spigen.com/collections/pixel/products/google-pixel-case-neo-hybrid?variant=29248762049">Spigen NeoHybrid for Pixel</a>. The case provides dual layer protection with TCU and PC bumper and comes with fingerprint resistance. The precise cutouts give easy access to all buttons and fingerprint sensor.</p>

<p>If you are looking to a get a case, check out if <a href="https://www.spigen.com/">Spigen</a> has one for your model!</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-06-12T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jun 12<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/azure-key-vault/'>azure key vault</a>, <a class='category' href='/blog/category/javascript/'>javascript</a>, <a class='category' href='/blog/category/nodejs/'>nodejs</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/azure-key-vault-from-node-dot-js/" itemprop="url">Azure Key Vault From Node.js</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p><img src="/images/nodejs_keyvault.png" alt="Azure Key Vault from Node js" class="center" /></p>

<p>If you develop on Node.js, you can use the <a href="https://github.com/Azure/azure-sdk-for-node">Azure SDK for Node</a> that makes it easy to consume and manage Microsoft Azure Services. In this post let&rsquo;s explore how to use the node SDK to connect to Azure Key Vault and interact with the vault objects. If you are new to key vault check out my <a href="http://www.rahulpnath.com/blog/category/azure-key-vault/">other posts here to get started</a>.</p>

<p>The <a href="https://www.npmjs.com/package/azure-keyvault">azure-keyvault</a> npm (node package manager) package allows accessing keys, secrets, and certificates on Azure Key Vault. It required Node.js version 6.x.x or higher. You can get the <a href="https://nodejs.org/en/">latest Node.js version here</a>.</p>

<blockquote><p><strong>Package Features</strong></p>

<ul>
<li><p><em>Manage keys: create, import, update, delete, backup, restore, list and get.</em></p></li>
<li><p><em>Key operations: sign, verify, encrypt, decrypt, wrap, unwrap.</em></p></li>
<li><p><em>Secret operations: set, get, update and list.</em></p></li>
<li><p><em>Certificate operations: create, get, update, import, list, and manage contacts and issuers.</em></p></li>
</ul>
</blockquote>

<p>It is easy to setup a new project and execute code using Node. The ease of setup is one of the things that I liked about node. To try out the Key Vault package, you can start fresh in a new folder and create a javascript file - <em>main.js</em> (you can name it anything you want).</p>

<p>The following packages are <em>required</em> to connect to the vault and authenticate. The <em><a href="https://www.npmjs.com/package/azure-keyvault">azure-keyvault</a></em> package as we saw above provides capabilities to interact with the vault. The <a href="https://www.npmjs.com/package/adal-node"><em>adal-node</em></a> is the Windows Active Directory Authentication Library for Node. The package makes it easy to authenticate to AAD to access AAD protected web resources. Applications using key vault need to <a href="http://www.rahulpnath.com/blog/authenticating-a-client-application-with-azure-key-vault/">authenticate using a token from an Azure AD Application</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">const</span> <span class="nx">KeyVault</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;azure-keyvault&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kr">const</span> <span class="p">{</span> <span class="nx">AuthenticationContext</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;adal-node&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h4><strong>Authenticate Using ClientId and Secret</strong></h4>

<p>Create the Azure AD application and the Secret key as shown in <a href="http://www.rahulpnath.com/blog/authenticating-a-client-application-with-azure-key-vault/">this post</a>. Grab the ClientId and Secret for authentication from the node application.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">const</span> <span class="nx">clientId</span> <span class="o">=</span> <span class="s2">&quot;CLIENT ID&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="s2">&quot;SECRET&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">secretAuthenticator</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">challenge</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AuthenticationContext</span><span class="p">(</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">authorization</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">acquireTokenWithClientCredentials</span><span class="p">(</span>
</span><span class='line'>        <span class="nx">challenge</span><span class="p">.</span><span class="nx">resource</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">clientId</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">secret</span><span class="p">,</span>
</span><span class='line'>        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">tokenResponse</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">authorizationValue</span> <span class="o">=</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">tokenType</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">accessToken</span><span class="p">;</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">authorizationValue</span><span class="p">);</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>To access the vault, we need to create an instance of the KeyVaultClient object which taken in a Credentials as shown below. The KeyVaultClient has different methods exposes to interact with keys, secrets, and certificates in the vault. For e.g. To retrieve a secret from the vault the <em>getSecret</em> method is used passing in the secret identifier.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">const</span> <span class="nx">secretUrl</span> <span class="o">=</span> <span class="s2">&quot;https://rahulkeyvault.vault.azure.net/secrets/ApiKey/b56396d7a46f4f848481de2e149ef069&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultCredentials</span><span class="p">(</span><span class="nx">secretAuthenticator</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultClient</span><span class="p">(</span><span class="nx">credentials</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">client</span><span class="p">.</span><span class="nx">getSecret</span><span class="p">(</span><span class="nx">secretUrl</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4><strong>Authenticate Using ClientId and Certificate</strong></h4>

<p>To authenticate using ClientId and Certificate the AuthenticationContext exposes a function <em>acquireTokenWithClientCertificate</em> which takes in the certificate (pem format) and the certificate thumbprint. If you already have a certificate go ahead and use that. If not create a new test certificate as shown below</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>makecert -sv mykey.pvk -n <span class="s2">&quot;cn=AD Test Vault Application&quot;</span> ADTestVaultApplication.cer -b 03/03/2017 -e 06/05/2018 -r
</span><span class='line'>pvk2pfx -pvk mykey.pvk -spc ADTestVaultApplication.cer -pfx ADTestVaultApplication.pfx -po <span class="nb">test</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create a new AD application and set it to use certificate authentication. Assign the application permissions to access the key vault.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="nv">$certificateFilePath</span> <span class="p">=</span> <span class="s2">&quot;C:\certificates\ADTestVaultApplication.cer&quot;</span>
</span><span class='line'><span class="nv">$certificate</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">X509Certificates</span><span class="p">.</span><span class="n">X509Certificate2</span>
</span><span class='line'><span class="nv">$certificate</span><span class="p">.</span><span class="n">Import</span><span class="p">(</span><span class="nv">$certificateFilePath</span><span class="p">)</span>
</span><span class='line'><span class="nv">$rawCertificateData</span> <span class="p">=</span> <span class="nv">$certificate</span><span class="p">.</span><span class="n">GetRawCertData</span><span class="p">()</span>
</span><span class='line'><span class="nv">$credential</span> <span class="p">=</span> <span class="no">[System.Convert]</span><span class="p">::</span><span class="n">ToBase64String</span><span class="p">(</span><span class="nv">$rawCertificateData</span><span class="p">)</span>
</span><span class='line'><span class="nv">$startDate</span><span class="p">=</span> <span class="no">[System.DateTime]</span><span class="p">::</span><span class="n">Now</span>
</span><span class='line'><span class="nv">$endDate</span> <span class="p">=</span> <span class="nv">$startDate</span><span class="p">.</span><span class="n">AddYears</span><span class="p">(</span><span class="n">1</span><span class="p">)</span>
</span><span class='line'><span class="nv">$adApplication</span> <span class="p">=</span> <span class="nb">New-AzureRmADApplication</span> <span class="n">-DisplayName</span> <span class="s2">&quot;CertAdApplication&quot;</span> <span class="n">-HomePage</span>  <span class="s2">&quot;http://www.test.com&quot;</span> <span class="n">-IdentifierUris</span> <span class="s2">&quot;http://www.test.com&quot;</span> <span class="n">-CertValue</span> <span class="nv">$credential</span>  <span class="n">-StartDate</span> <span class="nv">$startDate</span> <span class="n">-EndDate</span> <span class="nv">$endDate</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$servicePrincipal</span> <span class="p">=</span> <span class="nb">New-AzureRmADServicePrincipal</span> <span class="n">-ApplicationId</span> <span class="nv">$adApplication</span><span class="p">.</span><span class="n">ApplicationId</span>
</span><span class='line'>
</span><span class='line'><span class="nb">Set-AzureRmKeyVaultAccessPolicy</span> <span class="n">-VaultName</span> <span class="s1">&#39;RahulKeyVault&#39;</span> <span class="n">-ServicePrincipalName</span> <span class="nv">$servicePrincipal</span><span class="p">.</span><span class="n">ServicePrincipalNames</span><span class="p">[</span><span class="n">0</span><span class="p">]</span> <span class="n">-PermissionsToSecrets</span> <span class="n">all</span> <span class="n">-PermissionToKeys</span> <span class="n">all</span>
</span></code></pre></td></tr></table></div></figure>


<p>To convert the pvk file into the pem format that is required by adal-node to authenticate with the AD application use the below command.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openssl rsa -inform pvk -in mykey.pvk -outform pem -out mykey.pem
</span></code></pre></td></tr></table></div></figure>


<p>Using the pem encoded certificate private key, we can authenticate with the vault as shown below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">getPrivateKey</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">privatePem</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="p">{</span> <span class="nx">encoding</span><span class="o">:</span> <span class="s1">&#39;utf8&#39;</span> <span class="p">});</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">privatePem</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">certificateAuthenticator</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">challenge</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AuthenticationContext</span><span class="p">(</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">authorization</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">acquireTokenWithClientCertificate</span><span class="p">(</span>
</span><span class='line'>        <span class="nx">challenge</span><span class="p">.</span><span class="nx">resource</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">clientId</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">getPrivateKey</span><span class="p">(</span><span class="s2">&quot;mykey.pem&quot;</span><span class="p">),</span>
</span><span class='line'>        <span class="s2">&quot;CERTIFICATE THUMBPRINT&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">tokenResponse</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">authorizationValue</span> <span class="o">=</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">tokenType</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">accessToken</span><span class="p">;</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">authorizationValue</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using the <em>certificateAuthenticator</em> is the same as using the <em>secretAuthenticator</em>, by passing it to <em>KeyVaultCredentials</em></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultCredentials</span><span class="p">(</span><span class="nx">certificateAuthenticator</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultClient</span><span class="p">(</span><span class="nx">credentials</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">client</span><span class="p">.</span><span class="nx">getSecret</span><span class="p">(</span><span class="nx">secretUrl</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>To run the application first run <em>npm install</em> to install all the required packages and then execute the js file using <em>node main.js</em>. It fetches the secret value from the key vault using the certificate or secret authenticator. Hope this helps you to get started with Azure Key Vault from Node.js.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-capitalize">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2017-06-07T00:00:00+00:00"  data-updated="true" itemprop="datePublished dateCreated">Jun 7<sup>th</sup>, 2017</time>
        

<span class="glyphicon glyphicon-tags"></span>&nbsp; Posted in&nbsp; 
<span class="categories">
  
    <a class='category' href='/blog/category/tipow/'>tipow</a>, <a class='category' href='/blog/category/tools/'>tools</a>
  
</span>


        
      </p>
    
    
      <h1 class="entry-title" itemprop="name headline"><a href="/blog/pnggauntlet-smash-pngs-for-faster-sites/" itemprop="url">Tip of the Week: PNGGauntlet - Smash PNGs for Faster Sites</a></h1>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>When I upload images to my blog, I try to keep the file size as small as possible. Reducing image size helps improve the site load time. To grab screenshots I use <a href="http://www.rahulpnath.com/blog/screenshots-with-snagit/">Snagit</a> and use <a href="http://www.rahulpnath.com/blog/paint-dot-net/">Paint.net</a> for any editing and resizing the images.</p>

<p>To further optimize images and compress them I use <a href="">PNGGauntlet</a><a href="https://pnggauntlet.com/.">https://pnggauntlet.com/.</a> PNGGauntlet combines <a href="http://advsys.net/ken/util/pngout.htm">PNGOUT</a>, <a href="http://optipng.sourceforge.net/">OptiPNG</a> and DeflOpt and helps smash PNG&rsquo;s to the smallest size.</p>

<p><img src="/images/pnggauntlet.png" alt="PNG Gauntlet" class="center" /></p>

<p>PNGGauntlet provides options to configure the PNG output. You can play around with the options for the best output. I use the default options and has been working fine for me.</p>

<p>Check out <a href="https://pnggauntlet.com/">PNGGauntlet</a> to optimize images for the web.</p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/blog/page/6">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next"><a href="/blog/page/4">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/kumon-books-creative-workbooks/">Tip of the Week: Kumon Books - Creative Workbooks</a>
    
    <a class="list-group-item " href="/blog/manage-your-postman-api-specs/">Managing Your Postman API Specs</a>
    
    <a class="list-group-item " href="/blog/automated-api-testing-using-postman-collection-runner/">Automated API Testing Using Postman Collection Runner</a>
    
    <a class="list-group-item " href="/blog/reading-eggs-learning-to-read-can-be-easy-and-fun/">Tip of the Week: Reading Eggs - Learning To Read Can Be Easy And Fun</a>
    
    <a class="list-group-item " href="/blog/exploring-azurekeyvaultconfigbuilder/">Exploring AzureKeyVaultConfigBuilder</a>
    
  </div>
</section>
<section>
    <a href="https://msdn.microsoft.com/en-us/magazine/mt149362?author=Rahul+Nath">
        <img src="/images/msdn_magazine_aside.jpg" alt="MSDN Magazine Author">
    </a>
</section>



<section class="googleplus googleplus-hidden panel panel-default">
  <div class="panel-body">
    <h1>
      <a href="https://plus.google.com/+RahulNath?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h1>
  </div>
</section>



      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2018 - Rahul Nath<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'rahulpnath';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
