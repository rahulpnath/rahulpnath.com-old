<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Rahul Nath]]></title>
  <link href="http://rahulpnath.com/atom.xml" rel="self"/>
  <link href="http://rahulpnath.com/"/>
  <updated>2017-08-20T18:36:11+00:00</updated>
  <id>http://rahulpnath.com/</id>
  <author>
    <name><![CDATA[Rahul Nath]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Learn Touch Typing]]></title>
    <link href="http://rahulpnath.com/blog/learn-touch-typing/"/>
    <updated>2017-08-18T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/learn-touch-typing</id>
    <content type="html"><![CDATA[<blockquote><p><em>We are typists first, and programmers second.</em></p>

<p>-<a href="https://blog.codinghorror.com/we-are-typists-first-programmers-second/"><em>Jeff Atwood</em></a></p></blockquote>

<p>If you are like me, spending a lot of time with a computer, it&rsquo;s worth you take the time to learn to type without looking at the keyboard a.k.a touch typing (if you currently type by the <a href="https://en.wikipedia.org/wiki/Typing#Hunt_and_peck">hunt and peck method</a>). Though productivity cannot be measured by the number of words you type per minute, it&rsquo;s good to learn to touch type. There are various applications that help you to improve your typing speed. Some of them are online and some offline desktop applications. Pick one that suits you and improve your typing speed.</p>

<p><img src="http://rahulpnath.com/images/touch_typing.gif" alt="Touch Typing layout" alt="center" ></p>

<p>I learned to touch type only a couple of years back,  getting inspired after reading <a href="http://amzn.to/2hmblsw">Learn Anything in 20  Hours</a>. In the book, the author explains how he learned a new keyboard layout, Colemak, in just 20 hours.  The book explains the full process and setup used by the author. It uses various tools like <a href="https://wwwtyro.github.io/keyzen/">Keyzen</a>, <a href="http://type-fu.com/">Type-fu</a>, <a href="https://github.com/webiest/amphetype">Amphetype</a>. More than the tools it is the process and the approach to the learning that is interesting. A <a href="https://first20hours.com/typing/">summary of the tools and approaches</a> is available here but highly recommend reading the book. I found the approach very helpful and effective and used to learn QWERTY layout.</p>

<p>Irrespective of the way you choose to learn touch typing, it might seem a bit hard at the start. Keep at it for some time snd you will soon see an improvement in your typing speed.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Generating a Large PDF from Website Contents - HTML to PDF, Bookmarks and Handling Empty Pages]]></title>
    <link href="http://rahulpnath.com/blog/generating-a-large-pdf-from-website-contents-part-ii/"/>
    <updated>2017-08-16T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/generating-a-large-pdf-from-website-contents-part-ii</id>
    <content type="html"><![CDATA[<p>In the previous post, <a href="http://rahulpnath.com/blog/generating-a-large-pdf-from-website-contents">Generating a Large PDF from Website Contents</a> we saw from a high level the approach taken to generate PDF files from a Content Management System (CMS) website. In this post, we will delve further into the details of each of those areas.</p>

<h3>HTML To PDF</h3>

<p>There are a lot of libraries and services that support converting HTML to PDF. We chose this mechanism mainly for keeping the content formatting simple and reusable. Most of the PDF data was to be structured like the website content. This means we can reuse (read copy/paste) the HTML styling for the PDF content as well.</p>

<p>We used <a href="https://www.essentialobjects.com/Products/EOPdf/Default.aspx">Essential Objects HTML to PDF Converter</a> library. Our website is hosted as an Azure Web App and the <a href="https://www.essentialobjects.com/doc/pdf/install/deploy.aspx">Essential Objects library does not work in the Azure sandbox environment</a>. The <a href="https://github.com/projectkudu/kudu/wiki/Azure-Web-App-sandbox#pdf-generation-from-html">Azure Sandbox restriction</a> affects most of the HTML to PDF libraries. The recommended approach to use those libraries is to host the PDF conversion logic on an Azure Virtual Machine, which is what we also ended up doing. Alternatively, you can choose to use one of the <a href="https://stackoverflow.com/questions/5344176/is-there-a-web-service-for-converting-html-to-pdf">HTML to PDF hosted services</a>.</p>

<p>The below code snippet is what you need to convert an HTML URL endpoint to PDF. It uses the HtmlToPdf class from the <a href="https://www.nuget.org/packages/EO.Pdf/">EO.Pdf Nuget package</a>. The HtmlToPdfOptions specifies various conversion and formatting options. You can set margin space, common headers, footers, etc. for the generated PDF content. It also provides extensibility points in the PDF conversion pipeline.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="n">FileContentResult</span> <span class="nf">Convert</span><span class="p">(</span><span class="kt">string</span> <span class="n">url</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">pdfStream</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MemoryStream</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">pdfDocument</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PdfDocument</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">pdfOptions</span> <span class="p">=</span> <span class="k">this</span><span class="p">.</span><span class="n">GetPdfOptions</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">HtmlToPdf</span><span class="p">.</span><span class="n">ConvertUrl</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">pdfDocument</span><span class="p">,</span> <span class="n">pdfOptions</span><span class="p">);</span>
</span><span class='line'>    <span class="n">pdfDocument</span><span class="p">.</span><span class="n">Save</span><span class="p">(</span><span class="n">pdfStream</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="k">new</span> <span class="nf">FileContentResult</span><span class="p">(</span><span class="n">pdfStream</span><span class="p">.</span><span class="n">ToArray</span><span class="p">(),</span> <span class="s">&quot;application/pdf&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><strong><em>HTML Formatting Tip</em></strong></p>

<p><em>You might want to avoid content being split across multiple pages. E.g., images, charts, etc. In this cases, you can use the <a href="https://css-tricks.com/almanac/properties/p/page-break/">page-break-*</a> CSS property to adjust page breaks. <a href="https://www.essentialobjects.com/doc/pdf/htmltopdf/paging.aspx">Essentials objects honors the page-break-*</a> settings and adjusts the content when converting into PDF.</em></p></blockquote>

<h3>Bookmarks</h3>

<p><em>A <a href="https://helpx.adobe.com/acrobat/using/page-thumbnails-bookmarks-pdfs.html#about_bookmarks">bookmark</a> is a type of link with representative text in the Bookmarks panel in the navigation pane. Each bookmark goes to a different view or page in the document. Bookmarks are generated automatically during PDF creation from the table-of-contents entries of a document.</em></p>

<p>We generate a lot of small PDF files (per section and category/sub-category) and then merge them together to form the larger PDF. Each of the sections has one or more entries towards Table Of Contents (TOC). We decided to generate bookmarks first per each generated PDF. When merging the individual PDF, the bookmarks are merged first, and then the TOC is created from the full bookmark tree.</p>

<p>Bookmarks can be created automatically or manually using Essential Objects library. Most of the other libraries also provide similar functionality. Using the <a href="https://www.essentialobjects.com/doc/EO.Pdf.HtmlToPdfOptions.AutoBookmark.html">AutoBookmark property</a> we can have bookmarks created automatically based on HTML header (H1-H6) elements. If this does not fit with your scenario, then you can create them manually. In our case, we insert hidden HTML tags to specify bookmarks. Bookmark hierarchy is represented using custom attributes as shown below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;bookmark&quot;</span> <span class="na">id=</span><span class="s">&quot;TOC_Category1&quot;</span> <span class="na">name=</span><span class="s">&quot;Category1&quot;</span><span class="nt">&gt;</span>Category 1<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>...
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;bookmark&quot;</span> <span class="na">id=</span><span class="s">&quot;TOC_Category1_Section1&quot;</span> <span class="na">name=</span><span class="s">&quot;Section1&quot;</span> <span class="na">tocParent=</span><span class="s">&quot;TOC_Category1&quot;</span><span class="nt">&gt;</span>Section 1<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>...
</span><span class='line'><span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">&quot;bookmark&quot;</span> <span class="na">id=</span><span class="s">&quot;TOC_Category1_Section2&quot;</span> <span class="na">name=</span><span class="s">&quot;Section2&quot;</span> <span class="na">tocParent=</span><span class="s">&quot;TOC_Category1&quot;</span><span class="nt">&gt;</span>Section 2<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>Once the PDF is created from the URL, we parse the HTML content for elements with <em>bookmark</em> class and manually add the bookmarks into the generated PDF. The <em><a href="https://www.essentialobjects.com/doc/EO.Pdf.HtmlDocument.GetElementsByClassName_overload_1.html">GetElementsByClassName</a></em> and the <em><a href="https://www.essentialobjects.com/doc/EO.Pdf.HtmlElement.CreateBookmark_overloads.html">CreateBookmark</a></em> methods help us to create bookmarks from the hidden HTML elements in the page.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="p">{</span>
</span><span class='line'> <span class="p">...</span>
</span><span class='line'> <span class="kt">var</span> <span class="n">result</span> <span class="p">=</span> <span class="n">HtmlToPdf</span><span class="p">.</span><span class="n">ConvertUrl</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">pdfDocument</span><span class="p">,</span> <span class="n">pdfOptions</span><span class="p">);</span>
</span><span class='line'> <span class="n">BuildBookmarkTree</span><span class="p">(</span><span class="n">pdfDocument</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
</span><span class='line'> <span class="n">pdfDocument</span><span class="p">.</span><span class="n">Save</span><span class="p">(</span><span class="n">pdfStream</span><span class="p">);</span>
</span><span class='line'> <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">BuildBookmarkTree</span><span class="p">(</span><span class="n">PdfDocument</span> <span class="n">pdfDocument</span><span class="p">,</span> <span class="n">HtmlToPdfResult</span> <span class="n">htmlToPdfResult</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">bookmarkElements</span> <span class="p">=</span> <span class="n">htmlToPdfResult</span><span class="p">.</span><span class="n">HtmlDocument</span><span class="p">.</span><span class="n">GetElementsByClassName</span><span class="p">(</span><span class="s">&quot;bookmark&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">htmlElement</span> <span class="k">in</span> <span class="n">bookmarkElements</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">bookmark</span> <span class="p">=</span> <span class="n">htmlElement</span><span class="p">.</span><span class="n">CreateBookmark</span><span class="p">();</span>
</span><span class='line'>        <span class="p">...</span> <span class="c1">// Custom logic to build the bookmark hierarchy</span>
</span><span class='line'>        <span class="c1">// based on custom attributes or whatever approach you choose.</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">pdfDocument</span><span class="p">.</span><span class="n">Bookmarks</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">bookmark</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Handling Empty Pages</h3>

<p>In our case, the content is from a CMS, and the user gets an option to select what categories/sub-categories and sections of data to be displayed in the generated PDF. At times it happens that some of the selected combinations might not have any data in the system. To avoid printing a blank page (or an error page) in the generated PDF, we can check the conversion result to check for the returned content. Whenever the content does not exists the HTML endpoint returns an <a href="https://msdn.microsoft.com/en-us/library/system.web.mvc.emptyresult(v=vs.118">EmptyResult class</a>.aspx). At the PDF conversion side, you can check if the response is empty and accordingly perform your logic to ignore the generated PDF.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">HtmlToPdfResultExtensions</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">static</span> <span class="kt">bool</span> <span class="nf">IsEmptyResponse</span><span class="p">(</span><span class="k">this</span> <span class="n">HtmlToPdfResult</span> <span class="n">htmlToPdfResult</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">htmlToPdfResult</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>            <span class="n">htmlToPdfResult</span><span class="p">.</span><span class="n">HtmlDocument</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>            <span class="n">htmlToPdfResult</span><span class="p">.</span><span class="n">HtmlDocument</span><span class="p">.</span><span class="n">Body</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>            <span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">htmlToPdfResult</span><span class="p">.</span><span class="n">HtmlDocument</span><span class="p">.</span><span class="n">Body</span><span class="p">.</span><span class="n">InnerText</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once the individual PDF files are created for each of the section and category/subcategory combination, we can merge them together to generate the full PDF. We will see in the next post how to merge the bookmarks together along with shifting the PDF pages and generating Table of Contents from the bookmarks.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Analyze Your Site Performance]]></title>
    <link href="http://rahulpnath.com/blog/analyze-your-site-performance/"/>
    <updated>2017-08-11T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/analyze-your-site-performance</id>
    <content type="html"><![CDATA[<p>If you own a website, then it is good to check their performance now and then. Various factors affect the site speed, and it&rsquo;s better to use some tools to do the job for you.</p>

<p><a href="https://developers.google.com/speed/pagespeed/">Google PageSpeed</a> is a set of tools from Google designed to check and optimize websites performance. PageSpeed Insights is one of the tools in the suite that helps identify the ways to make your site faster and mobile friendly. The tools check for common good practices and provide a score out of 100 points. <em>PageSpeed Insights only considers the network-independent aspects of page performance: the server configuration, the HTML structure of a page, and its use of external resources such as images, JavaScript, and CSS.</em></p>

<p><img src="http://rahulpnath.com/images/PageInsights.png" alt="PageInsights" class="center" ></p>

<p><a href="http://yslow.org/">YSlow</a> is a similar tool from Yahoo!, that analyzes web pages for performance. It is available as a browser extension and has one for all popular ones. It provides a grade for the web page based on a predefined ruleset or a user-defined ruleset. The grade is calculated based on the <a href="http://yslow.org/ruleset-matrix/">YSlow Ruleset Matrix</a>.</p>

<p><img src="http://rahulpnath.com/images/yslow.png" alt="YSlow" class="center" ></p>

<p>I have been implementing some of the recommendations from the above tools on this blog, but as you can see from the above results, there is still more to be done. Hope you find this helpful for your sites.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Generating a Large PDF from Website Contents]]></title>
    <link href="http://rahulpnath.com/blog/generating-a-large-pdf-from-website-contents/"/>
    <updated>2017-08-08T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/generating-a-large-pdf-from-website-contents</id>
    <content type="html"><![CDATA[<p>At one of my recent clients, we had a requirement to generate a PDF dynamically based on the contents of the website. The website is a Content Management System (CMS) built on top of <a href="https://umbraco.com/">Umbraco</a>. The content is grouped into different categories and sub-categories. Each category and sub-category had different sections/sub-sections under that. Some sections are optional for certain categories, and all of these are dynamic. In this post, I will walk through at high level the approach taken to solve the problem.</p>

<p>The user selects the categories/sub-categories and the sections that they wish to export as PDF. On submit, a PDF needs to be generated based on the website content.</p>

<figure class='code'><figcaption><span>Model Structure of Domain</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Category</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Section</span><span class="p">&gt;</span> <span class="n">Sections</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Category</span><span class="p">&gt;</span> <span class="n">SubCategory</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Section</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Section</span><span class="p">&gt;</span> <span class="n">SubSections</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://rahulpnath.com/images/pdf_generation.png" class="center" alt="Select options to download" /></p>

<p>The actual site had one more level of options (say sub-sections), so you can imagine the number of possible combinations to generate the content. The site content was huge as well, and a PDF with all options selected would be around 4000-5000 pages. So creating the PDF every time some one clicks the button was out of the question. We had to cache the generated PDF&rsquo;s and serve them as the request comes in. But the challenge was how to manage the cache so that we can build up the PDF based on the options selected.</p>

<div class="alert alert-info">
If you are using HTML to PDF libraries be aware that most of the libraries out there (<a href="https://www.essentialobjects.com/Products/EOPdf/Default.aspx">Essential Object</a>, <a href="http://www.evopdf.com/">EvoPDF</a> etc.) <strong>does not work on Azure Web Apps</strong>. This is because of the <a href="https://github.com/projectkudu/kudu/wiki/Azure-Web-App-sandbox#pdf-generation-from-html">sandbox restrictions</a> on the applications irrespective of the Azure plan you are on. The preferred solution is to host the conversion code on a VM. If you find that an overhead (which it is) consider using the SAAS alternatives for converting HTML to PDF.
</div>


<p>Below is the flow diagram of the complete process of generating the PDF as a request comes. The request specifies the categories/sub-categories along with the sections that need to be in the generated PDF.</p>

<p><img src="http://rahulpnath.com/images/pdf_generation_flow.png" class="center" alt="PDF Generation Flow" /></p>

<p>We decided to create a PDF file for each section per category/subcategory selection. Once all the sections are ready, all the PDF files will be merged into one. While merging we also build up the bookmark tree and the table of contents. Inserting the table of contents page at the start of the PDF requires pushing all the page numbers to match the new ones.</p>

<p>The PDF layout for individual sections per category/subcategory is in HTML. The application exposes endpoints for the HTML content for the different sections. We used <a href="https://www.essentialobjects.com/Products/EOPdf/Default.aspx">Essential Object HTML to PDF Converter</a> to convert the HTML to PDF files. Bookmarks for the associated section are embedded in HTML. While converting to PDF, the bookmarks get added to the PDF, which later gets merged into the full bookmark tree. The generated PDF file is cached for any new requests.</p>

<p>Since we have around forty categories/sub-categories, twelve section, and ten sub-sections, generating the full PDF take a while. So we generate the cache at fixed intervals and as required (when content is updated in the CMS). The above approach of generating PDF files has been working fine for us. Since the individual PDF sections are generated in isolation, it gives us the flexibility to scale the generation process as required. Combining the generated PDF files is often fast and can be cached at a different level as well to speed up the whole process.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Chocolatey - Install Softwares With Ease]]></title>
    <link href="http://rahulpnath.com/blog/chocolatey-install-softwares-with-ease/"/>
    <updated>2017-08-04T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/chocolatey-install-softwares-with-ease</id>
    <content type="html"><![CDATA[<p><img src="http://rahulpnath.com/images/chocolatey.png" alt="Chocolatey - Package Manager for Windows" class="center" ></p>

<p><a href="https://chocolatey.org/">Chocolatey</a> is a package manager for Windows. Chocolatey is a central store of applications, tools, and other packages. It allows you to install them on your computer from the command line. Let’s look at an example to make things more clear. Let’s say I want to install the Google Chrome Browser on my system. Below is how I would go about installing it.</p>

<blockquote><p><strong>Installing Google Chrome (Without Chocolatey)</strong></p>

<ol>
<li>Bing for Google Chrome (Assuming that you are on Windows and open up Internet Explorer and search for Google Chrome)</li>
<li>Click the relevant link from the Search Results</li>
<li>Hit the Download Chrome button</li>
<li>Wait for the installer to download and open that to install.</li>
</ol>


<p><strong>Installing Google Chrome (With Chocolatey)</strong></p>

<ol>
<li>Run &lsquo;<em>choco install googlechrome</em>&rsquo; from command line</li>
</ol>
</blockquote>

<p>Installing with Chocolatey is quick and easy. You no longer need to go around searching the web for the software that you want to install. If you are unsure of the package name (e.g. googlechrome), you can search the entire packages library. This is possible from the command line using &lsquo;<em>choco search</em>.&rsquo; Or you can also search on their <a href="https://chocolatey.org/packages">website</a>.</p>

<p>Run the below script from the command line to <a href="https://chocolatey.org/install">install Chocolatey Package Manager</a>. Once installed you can start managing applications through the command line using Chocolatey.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>@<span class="s2">&quot;%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe&quot;</span> -NoProfile -ExecutionPolicy Bypass -Command <span class="s2">&quot;iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))&quot;</span> <span class="o">&amp;&amp;</span> SET <span class="s2">&quot;PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Other than installing and searching packages, Chocolatey also supports a lot of other commands to manage applications including un-installation. The entire commands supported are available <a href="https://chocolatey.org/docs/commandslist">here</a>. Instead, you can get the details in your command line using &lsquo;<em>choco -h</em>.&rsquo;</p>

<p>Hope that helps you save some time when you next want to install something.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[One Day Trips Around Sydney]]></title>
    <link href="http://rahulpnath.com/blog/one-day-trips-around-sydney/"/>
    <updated>2017-08-03T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/one-day-trips-around-sydney</id>
    <content type="html"><![CDATA[<p>Australia is known for its beaches, and there are a plenty of them all around. Sydney is no different for that, and it&rsquo;s known for some of the world famous beaches including the Bondi beach. But at times it&rsquo;s also good to try places other than beaches. Here is a list of such places around Sydney that is perfect for a day trip and not just limited to beaches.</p>

<blockquote><p><a href="https://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn%27t_read"><strong>TLDR;</strong></a></p>

<ul>
<li><a href="http://www.grandpacificdrive.com.au/">Grand Pacific Drive</a></li>
<li><a href="http://www.visitnsw.com/destinations/country-nsw/southern-highlands/fitzroy-falls/attractions">Fitzroy Falls</a></li>
<li><a href="http://visitkangaroovalley.com.au/">Kangaroo Valley</a></li>
<li><a href="http://www.audleyboatshed.com/">Audley Boating</a></li>
<li><a href="https://goo.gl/maps/r9Wup35pVFR2">Morriset Park</a></li>
<li><a href="http://www.watkinsfamilyfarm.com.au/">Mandarin Picking</a></li>
<li><a href="http://www.calmsleyhill.com.au/">Animal Farm (Kids)</a></li>
<li><a href="https://taronga.org.au/taronga-zoo">Taronga Zoo</a></li>
<li><a href="http://www.illawarrafly.com/">Illawarra Fly Treetops</a></li>
<li><a href="http://www.nantien.org.au/en/">Nan tien temple</a></li>
<li><a href="http://www.nationalparks.nsw.gov.au/visit-a-park/parks/kuringgai-chase-national-park">Ku-ring-gai Chase National Park</a></li>
<li><a href="http://theentrance.org.au/">The Entrance, Central Coast</a></li>
</ul>
</blockquote>

<h3><a href="http://www.grandpacificdrive.com.au/">Grand Pacific Drive</a></h3>

<p>The Grand Pacific Drive makes a perfect day out with one of the best drives and perfect scenery along the route. It starts from Royal National Park through Wollongong, Shellharbour, Kiama, Shoalhaven, Southern Highlands, Eurobodalla and ending at Sapphire Coast. Each one of those places have things enough to spend a whole day. You can either choose to do the entire drive or do each of these places on separate day trips.
The <a href="http://www.grandpacificdrive.com.au/">Grand Pacific Drive</a> site has all the details that you need to plan your trip. It also has a trip planner that makes planning easier.</p>

<p><a href="http://www.grandpacificdrive.com.au/">
    <img src="http://rahulpnath.com/images/sydney_trip_gpd.png" class="center" alt="Grand Pacific Drive" />
</a></p>

<p>Do make it one day for the <a href="https://www.instagram.com/p/BUoLoKYj2B3/?taken-by=rahulpnath">sun rise at the Sea Cliff bridge</a>. It&rsquo;s amazing and worth waking up early enough to make it up there on time.</p>

<h3><a href="http://www.visitnsw.com/destinations/country-nsw/southern-highlands/fitzroy-falls/attractions">Fitzroy Falls</a></h3>

<p>As the name suggests, the Fitzroy Falls spots a magnificent waterfall with a nice walking track along the sides. There are various lookouts to the waterfall along the walking track. There is also a cycling track from the falls to Kangaroo Valley for those interested.</p>

<p><img src="http://rahulpnath.com/images/sydney_trip_fitzroy_falls.jpg" class="center" alt="Fitzroy Falls" /></p>

<h3><a href="http://visitkangaroovalley.com.au/">Kangaroo Valley</a></h3>

<p>Kangaroo Valley is a two-hour drive from Sydney and is popular for kayaking, canoeing, golf and wine tasting. You can take a break and play on the banks of the Kangaroo River. Do check out the <a href="http://kangaroovalleyfudge.com.au/">Fudge House</a> if you have a sweet tooth and the <a href="http://worldsbestpies.com.au/">pie shop</a> for a quick snack.</p>

<h3><a href="http://www.audleyboatshed.com/">Audley Boating</a></h3>

<p>Situated in the Royal National Park, Audley boating provides a great experience along the Kangaroo Creek. You can hire a boat or ride a bike and enjoy the magnificent views.</p>

<h3><a href="https://goo.gl/maps/r9Wup35pVFR2">Morriset Park</a></h3>

<p>If you want to see Kangaroos, then this is the place you should be. You can get close up with kangaroos and hundreds of them. It&rsquo;s an experience that no zoo can provide. One of the Kangaroo spotting points is <a href="https://goo.gl/maps/r9Wup35pVFR2">near the Morriset Hospital</a>. Even on a rainy day, there were plenty of them so I am sure you would not miss out on it. There are a few other parks and places as well nearby where you can take a stroll and stand a chance of spotting one.</p>

<p><img src="http://rahulpnath.com/images/sydney_trip_morriset_park.png" class="center" alt="Morriset Park, Kangaroos" /></p>

<h3><a href="http://www.watkinsfamilyfarm.com.au/">Mandarin Picking</a></h3>

<p>Situated on the banks of Hawkesbury River at Wisemans Ferry there are a couple of farms where you can go picking mandarins. I had been to the <a href="http://www.watkinsfamilyfarm.com.au/">Watkins Family Farm</a> and enjoyed every bit of it. It&rsquo;s great fun for kids and equally for adults. We ended up going back there twice in the same season. Make sure you check the farm sites for details on timing and months they are open.</p>

<p>There are a few other picnic spots as well around the area. There is a <a href="http://www.rms.nsw.gov.au/roads/using-roads/vehicular-ferries/index.html#Wisemansferry">vehicle ferry service</a> to take your vehicle across the river and explore that side as well.</p>

<h3><a href="http://www.calmsleyhill.com.au/">Animal Farm (Kids)</a></h3>

<p>If you have kids, then a day out at one of the animal farms around Sydney is an excellent way to spend your day. Google should help you find the farms around you. The <a href="http://www.calmsleyhill.com.au/">Calmsley Hill</a> animal farm is a family friendly environment with <a href="http://www.calmsleyhill.com.au/visitor-information/daily-show-times">daily shows</a>, picnic and BBQ area. They often run some <a href="http://www.calmsleyhill.com.au/city-farm/web-deal">online offers</a> so make sure you check that out before you head off.</p>

<h3><a href="https://taronga.org.au/taronga-zoo">Taronga Zoo</a></h3>

<p>The zoo is always a great place to spend time. The <a href="https://taronga.org.au/taronga-zoo">Taronga Zoo</a> experience is no different. If you have not taken the Sydney Ferries before this is a good excuse to do that. It&rsquo;s really big, and there are a lot of shows as well. Do check out the show times prior and plan for it upfront. It can be crowded at times. If you have kids getting an annual pass to the zoo might be worth.</p>

<h3><a href="http://www.illawarrafly.com/">Illawarra Fly Treetops</a></h3>

<p>Escape into the trees at the <a href="http://www.illawarrafly.com/">Illawarra Fly Treetops</a> and enjoy the stunning views and the zipline experience. It is a perfect place for a day trip and equal fun for families. It offers a breath taking views and a great experience. Check out for <a href="https://illawarrafly.experienceoz.com.au/en/sydney/illawarra-fly-treetop-walk-online-ticketing">online offers</a>!</p>

<p><img src="http://rahulpnath.com/images/sydney_trip_illawara.png" class="center" alt="Illawara Fly Treetop" /></p>

<h3><a href="http://www.nantien.org.au/en/">Nan tien temple</a></h3>

<p>The Nan Tien Temple is the largest Buddhist temple in the Southern Hemisphere. It&rsquo;s a calm and peaceful place and a nice spot to take your day off and relax. The temple offers <a href="http://www.nantien.org.au/en/services">many services</a> including a guided tour. They run various retreats and meditation classes if you are interested. You can either choose to spend a whole day here or spend a few hours on the way to Illawarra Fly Tree Tops.</p>

<h3><a href="http://www.nationalparks.nsw.gov.au/visit-a-park/parks/kuringgai-chase-national-park">Ku-ring-gai Chase National Park</a></h3>

<p> Ku-ring-gai Chase National Park combines important history with scenic beauty, making it perfect for a day out for families and kids. There are great picnic areas, heritage walks, lighthouse, boating, etc. There are not many shops around so get all that you need on the way.</p>

<h3><a href="http://theentrance.org.au/">The Entrance, Central Coast</a></h3>

<p>Even though the main attraction here is a beach, there still are enough things other than that to make your trip worth while. Tuggerah Lakes Cycleway is an off-road, scenic 12-kilometre ride and is perfect to spend some time. Don&rsquo;t miss out on the <a href="https://goo.gl/maps/4cA463PzD3U2">Pelican Feeding</a> which happens at 3:30 pm every day all round the year.</p>

<p>These places make a perfect getaway for a day. Mix it up with some of the awesome beaches - Bondi, Palm, Wattamolla, La Perouse, Coogee, Ramsgate, Cronulla, etc. and it should be enough to keep all your weekends busy. What places did I miss? Sound off in the comments.</p>

<p>Have great weekends ahead!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Testing Your Website Under Different Bandwidths]]></title>
    <link href="http://rahulpnath.com/blog/testing-your-website-under-different-bandwidths/"/>
    <updated>2017-07-26T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/testing-your-website-under-different-bandwidths</id>
    <content type="html"><![CDATA[<p>With the blazing fast internet speeds at work (and at home) it might be hard to imagine how sites would work for people with a lower bandwidth. When developing for the Web, it is good to keep in mind that people from various regions across the globe might access your site. Internet speeds are not that fast around the world. So it is essential to test how your website performs for people on a lower bandwidth.</p>

<p>There are a lot of plugins and external tools that can simulate a lower bandwidth scenario and makes testing on slower bandwidth easier. If you are using Google Chrome, then you already have one such tool under your belt. The <a href="https://developers.google.com/web/tools/chrome-devtools/network-performance/reference#throttling">Network tab</a> under Google Chrome Developer Tools has an option to set different bandwidth profiles. Setting this to a profile that you want, and launching the site forces the site load on the set bandwidth.</p>

<p><img src="http://rahulpnath.com/images/chrome_network_delay.png" alt="Google Chrome Developer Tools - Network Delay" class="center" /></p>

<p>There are many default bandwidth profiles in there, and it also allows you to add custom profiles if required. There is also an option to simulate offline mode, to test how the application behaves without an internet connection (if that applies to you). However such testing is mostly restricted to manual testing, and for automating this, you might have to look for external tools.</p>

<p>Hope this helps optimize your site for lower bandwidth!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Azure Web App Restarting Automatically Due to Overwhelming Change Notification]]></title>
    <link href="http://rahulpnath.com/blog/azure-web-restarting-automatically-due-to-overwhelming-change-notification/"/>
    <updated>2017-07-24T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/azure-web-restarting-automatically-due-to-overwhelming-change-notification</id>
    <content type="html"><![CDATA[<p>At one of my clients, we faced a strange issue recently. The Azure Web application restarted automatically very often. The event log in the <a href="https://github.com/projectkudu/kudu/wiki/Kudu-console">Kudu console</a> showed the below error message.</p>

<blockquote><p><em>2017-07-13 00:09:50,333 [P45516/D4/T171] INFO  Umbraco.Core.UmbracoApplicationBase - Application shutdown. Details: HostingEnvironment</em></p>

<p><em>_shutDownMessage=Directory rename change notification for &rsquo;D:\home\site\wwwroot&#8217;.</em>  <br/>
<em>Overwhelming Change Notification in wwwroot</em>   <br/>
<em>HostingEnvironment initiated shutdown</em>  <br/>
<em>Directory rename change notification for &rsquo;D:\home\site\wwwroot&#8217;.</em>   <br/>
<em>Overwhelming Change Notification in wwwroot</em>   <br/>
<em>Initialization Error</em>   <br/>
<em>HostingEnvironment caused shutdown</em></p></blockquote>

<p>As you can tell from the logs, the website is an <a href="https://umbraco.com/">Umbraco</a> CMS hosted as an Azure Web application. We noticed that the restarts were happening more when the content was getting updated through <a href="https://our.umbraco.org/documentation/getting-started/backoffice/">backoffice</a>. The error also states that the restart was caused due to <em>Overwhelming Change Notification in wwwroot</em>. This hints that there are changes that are happening under the wwwroot folder, where the site is hosted.</p>

<div class="alert alert-info">
Even though this post details on why the specific site on Umbraco was restarting, most of the contents are still applicable for any other ASP.NET MVC application.
</div>


<h3>fcnMode Configuration</h3>

<p>A quick search got me to the <a href="https://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.fcnmode(v=vs.110">fcnMode</a>.aspx)setting under <a href="https://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection(v=vs.110">httpRuntime</a>.aspx) section. An ASP.net application monitors certain files and folders under the wwwroot folder and will restart the application domain whenever it detects changes. This likely look looks the reason why the web site is restarting.</p>

<p>The <a href="https://msdn.microsoft.com/en-us/library/system.web.configuration.fcnmode(v=vs.110">fcnMode enumeration</a>.aspx) can take one of the four values below. For an Umbraco application this is by <a href="http://issues.umbraco.org/issue/U4-7712">default set to <em>Single</em></a>.</p>

<ul>
<li><strong>Default</strong>: For each subdirectory, the application creates an object that monitors the subdirectory. This is the default behavior.</li>
<li><strong>Disabled</strong>: File change notification is disabled.</li>
<li><strong>NotSet</strong>: File change notification is not set, so the application creates an object that monitors each subdirectory. This is the default behavior.</li>
<li><strong>Single</strong>: The application creates one object to monitor the main directory and uses this object to monitor each subdirectory.</li>
</ul>


<figure class='code'><figcaption><span>fcnMode set to Single for Umbraco application</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;system.web&gt;</span>
</span><span class='line'>    ...
</span><span class='line'>    <span class="nt">&lt;httpRuntime</span>
</span><span class='line'>        <span class="na">requestValidationMode=</span><span class="s">&quot;2.0&quot;</span>
</span><span class='line'>        <span class="na">enableVersionHeader=</span><span class="s">&quot;false&quot;</span>
</span><span class='line'>        <span class="na">targetFramework=</span><span class="s">&quot;4.5&quot;</span>
</span><span class='line'>        <span class="na">maxRequestLength=</span><span class="s">&quot;51200&quot;</span>
</span><span class='line'>        <span class="na">fcnMode=</span><span class="s">&quot;Single&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    ...
</span><span class='line'><span class="nt">&lt;system.web&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><em>FCNMode creates a monitor object with a buffer size of 4KB for each folder. When FCNMode is set to Single, a single monitor object is created with a buffer size of 64KB. When there are file changes, the buffer is filled with file change information. If the buffer gets overwhelmed with too many file change notifications an “Overwhelming File Change Notifications” error will occur and the app domain will recycle. The likelihood of the buffer getting overwhelmed is higher in an environment where you are using separate file server because the folder paths are much larger.</em></p>

<p>-<a href="http://www.dnnsoftware.com/community-blog/cid/154980/aspnet-file-change-notifications-and-dnn"> ASP.NET File Change Notifications and DNN</a></p></blockquote>

<p>You can read more about fcnMode setting and how it affects ASP.Net applications <a href="https://shazwazza.com/post/all-about-aspnet-file-change-notification-fcn/">here</a>.</p>

<h3>What&rsquo;s causing file changes?</h3>

<p>Default reaction when you come across such a setting or configuration value might be to turn that off and fcnMode does allow that as well - <em>Disabled</em>. But first, it is better that we understand what is causing file changes under the wwwroot folder and see if we can address that. The <a href="https://shazwazza.com/post/fcn-file-change-notification-viewer-for-aspnet/">FCN Viewer</a> helps visualize how many files and folders are being watched in as ASP.Net application.</p>

<p>In the Umbraco website, we are using a third party library <a href="http://imageprocessor.org/">ImageProcessor</a> that helps to process images dynamically. The ImageProcessor caches images and the <a href="http://imageprocessor.org/imageprocessor-web/configuration/#cacheconfig">cache location is configurable</a>. By default, it caches files under the App_Data/cache folder, which also happens to be one of the folders that the ASP.Net application monitors for changes. So anytime there are lots of files changing in the cache folder it causes the single monitor object monitoring the folders. This causes a buffer overflow and triggers an application restart due to <em>Overwhelming file change notifications</em>. However, ImageProcessor does allow moving the <a href="https://github.com/JimBobSquarePants/ImageProcessor/issues/518">cache folder outside of the wwwroot folder</a>. This causes the file not to be monitored and still work fine with the application. Since the <a href="https://twitter.com/Shazwazza/status/885770960321773568">library does not create the cache folder automatically</a>, we need to make sure that the folder specified in the config file exists.</p>

<p>Having moved the cache folder outside of the wwwroot, I no longer need to update the fcnMode setting and can leave it as intended. If you are facing application restarts as well due to overwhelming change notification in wwwroot see what is likely causing the file changes and then try and fix that instead of just setting the fcnMode to disabled.</p>

<p>Hope that helps fix your application restarting problem!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Hemingway Editor - Improve Your Writing]]></title>
    <link href="http://rahulpnath.com/blog/hemingway-editor/"/>
    <updated>2017-07-19T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/hemingway-editor</id>
    <content type="html"><![CDATA[<blockquote><p><em>Writing is hard work. A clear sentence is no accident. Very few sentences come out right the first time, or even the third time. Remember this in moments of despair. If you find that writing is hard, it&rsquo;s because it is hard.</em></p>

<p>&ndash; William Zinsser, On Writing Well</p></blockquote>

<p>Editing is the hardest part of writing and one that I skip the most. I try hard not to skip editing, but often I end up being lazy to do the hard work. I try to cover this up with some tools to make it faster. It is hard for one tool to get it all right. So it&rsquo;s best if you have a range of tools under your belt to support you with writing.</p>

<p><a href="http://www.hemingwayapp.com/">The Hemingway Editor</a> highlights hard to read sentences, adverbs, complicated phrases, etc. The writing app uses different colors to highlight the various issues as shown below. The editor also shows a summary of the text including the reading time, total words, sentences etc. The app also shows a <a href="http://www.hemingwayapp.com/help.html">Readability Grade</a> using Automated Readability Index.</p>

<p><img src="http://rahulpnath.com/images/hemingway.png" alt="Hemingway Editor"></p>

<p>The Hemingway Editor is available for free on the web with lesser features. The web application does not let you save your work. You are always at risk of loosing the work if you are authoring on the site.</p>

<p>The <a href="http://www.hemingwayapp.com/desktop.html">Windows/Mac applications</a> supports a larger set of features but for a price. The desktop application works without an internet connection, allows publishing to Wordpress/Medium. It also supports to exporting to different formats (word, pdf, html, markdown etc.).</p>

<p>I use the Hemingway Editor (on the web) occasionally and find it useful at times. It&rsquo;s good to double check for any issues before publishing the post. Hope this helps you as well in your writing.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Signing a PDF File Using Azure Key Vault]]></title>
    <link href="http://rahulpnath.com/blog/signing-a-pdf-file-using-azure-key-vault/"/>
    <updated>2017-07-18T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/signing-a-pdf-file-using-azure-key-vault</id>
    <content type="html"><![CDATA[<p><em>How to sign a PDF using Azure Key Vault?</em> - This is one of the questions that I often get regarding Azure Key Vault. In this post, we will explore how to sign a PDF using a certificate in Azure Key Vault. Signing a PDF has various aspects to it which are covered in depth in the white paper - <a href="http://developers.itextpdf.com/books#digsig">Digital Signatures for PDF Documents</a>. We will be using the <a href="http://itextpdf.com/">iText library</a> to sign the PDF. iText is available as a <a href="https://www.nuget.org/packages/itext7/">Nuget package library</a>. The below image shows the elements that composes a digital signature on the left and actual contents on the right.</p>

<p><img src="http://rahulpnath.com/images/adobe_signature.png" alt="Digitally Signed PDF Contents" /></p>

<h3>Signing with a Local Certificate</h3>

<p>When the certificate (along with the private key) is available locally, signing the PDF is straightforward. You can load the certificate as an X509Certificate from the local certificate store using the <a href="https://stackoverflow.com/questions/11115511/how-to-find-certificate-by-its-thumbprint-in-c-sharp">thumbprint</a>. Make sure that the certificate is installed with the Exportable option as shown below.</p>

<p><img src="http://rahulpnath.com/images/certificate_exportable.png" alt="Exportable certificate" /></p>

<p>The <a href="http://itextsupport.com/apidocs/itext5/latest/com/itextpdf/text/pdf/security/PrivateKeySignature.html">PrivateKeySignature</a> is an implementation of IExteralSignature that can be used to sign the PDF when the private key is available. The below code signs the <em>Hello World.pdf</em> using the certificate from the local store and saves that as <em>Local Key.pdf</em>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SignPdfWithLocalCertificate</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">certificate</span> <span class="p">=</span> <span class="n">GetCertificateLocal</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">privateKey</span> <span class="p">=</span> <span class="n">DotNetUtilities</span><span class="p">.</span><span class="n">GetKeyPair</span><span class="p">(</span><span class="n">certificate</span><span class="p">.</span><span class="n">PrivateKey</span><span class="p">).</span><span class="n">Private</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">externalSignature</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PrivateKeySignature</span><span class="p">(</span><span class="n">privateKey</span><span class="p">,</span> <span class="s">&quot;SHA-256&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="n">SignPdf</span><span class="p">(</span><span class="n">certificate</span><span class="p">,</span> <span class="n">externalSignature</span><span class="p">,</span> <span class="s">&quot;Local Key.pdf&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">private</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">SignPdf</span><span class="p">(</span><span class="n">X509Certificate2</span> <span class="n">certificate</span><span class="p">,</span> <span class="n">IExternalSignature</span> <span class="n">externalSignature</span><span class="p">,</span> <span class="kt">string</span> <span class="n">signedPdfName</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">bCert</span> <span class="p">=</span> <span class="n">DotNetUtilities</span><span class="p">.</span><span class="n">FromX509Certificate</span><span class="p">(</span><span class="n">certificate</span><span class="p">);</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">chain</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Org</span><span class="p">.</span><span class="n">BouncyCastle</span><span class="p">.</span><span class="n">X509</span><span class="p">.</span><span class="n">X509Certificate</span><span class="p">[]</span> <span class="p">{</span> <span class="n">bCert</span> <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PdfReader</span><span class="p">(</span><span class="s">&quot;Hello World.pdf&quot;</span><span class="p">))</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">using</span> <span class="p">(</span><span class="kt">var</span> <span class="n">stream</span> <span class="p">=</span> <span class="k">new</span> <span class="n">FileStream</span><span class="p">(</span><span class="n">signedPdfName</span><span class="p">,</span> <span class="n">FileMode</span><span class="p">.</span><span class="n">OpenOrCreate</span><span class="p">))</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="kt">var</span> <span class="n">signer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">PdfSigner</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</span><span class='line'>            <span class="n">signer</span><span class="p">.</span><span class="n">SignDetached</span><span class="p">(</span><span class="n">externalSignature</span><span class="p">,</span> <span class="n">chain</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="n">PdfSigner</span><span class="p">.</span><span class="n">CryptoStandard</span><span class="p">.</span><span class="n">CMS</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Certificates in Azure Key Vault</h3>

<p>You can <a href="http://www.rahulpnath.com/blog/manage-certificates-in-azure-key-vault/">manage certificates in Azure Key Vault</a> as a first class citizen. Azure Key Vault supports creating new or uploading existing certificates into the vault. Key Vault provides an option to specify whether the private portion of the certificate is exportable or not. Let us see how we can use the certificate from the vault in both these scenarios.</p>

<h4><strong>Exportable Certificate</strong></h4>

<p>To create a self-signed certificate in the vault use the below PowerShell script. In this case, the private key is exportable. Executing the below script adds a self-signed certificate into the vault.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="nv">$certificatepolicy</span> <span class="p">=</span> <span class="nb">New-AzureKeyVaultCertificatePolicy</span>   <span class="n">-SubjectName</span> <span class="s2">&quot;CN=www.rahulpnath.com&quot;</span>   <span class="n">-IssuerName</span> <span class="n">Self</span>   <span class="n">-ValidityInMonths</span> <span class="n">12</span>
</span><span class='line'><span class="nb">Add-AzureKeyVaultCertificate</span> <span class="n">-VaultName</span> <span class="s2">&quot;VaultFromCode&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;TestCertificate&quot;</span> <span class="n">-CertificatePolicy</span> <span class="nv">$certificatepolicy</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://rahulpnath.com/images/keyvault_getazurekeyvaultcertificate.png" class="center" alt="Key Vault Certificate" /></p>

<p>Creating a certificate, in turn, creates three objects in the vault - Certificate, Key, and Secret. The certificate represents the certificate just created, the Key represents the private part of the certificate, and the Secret has the certificate in PFX format (just as if you had uploaded a <a href="http://www.rahulpnath.com/blog/pfx-certificate-in-azure-key-vault/">PFX as a Secret</a>). Since the certificate created above is exportable, the Secret contains the Private portion of the key as well. To recreate the certificate locally in memory, we use the below code</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="n">X509Certificate2</span><span class="p">&gt;</span> <span class="n">GetCertificateKeyVault</span><span class="p">(</span><span class="kt">string</span> <span class="n">secretIdentifier</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="n">GetKeyVaultClient</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">secret</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">GetSecretAsync</span><span class="p">(</span><span class="n">secretIdentifier</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">certSecret</span> <span class="p">=</span> <span class="k">new</span> <span class="n">X509Certificate2</span><span class="p">(</span>
</span><span class='line'>        <span class="n">Convert</span><span class="p">.</span><span class="n">FromBase64String</span><span class="p">(</span><span class="n">secret</span><span class="p">.</span><span class="n">Value</span><span class="p">),</span>
</span><span class='line'>        <span class="kt">string</span><span class="p">.</span><span class="n">Empty</span><span class="p">,</span>
</span><span class='line'>        <span class="n">X509KeyStorageFlags</span><span class="p">.</span><span class="n">Exportable</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">certSecret</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The certificate is encoded as Base64String in the Secret. We create an in-memory representation of the certificate and mark it as <em>Exportable</em>. This certificate can be used the same way as the local certificate. Since the private key is part of it, the PrivateKeySignature can still be used to sign.</p>

<h4><strong>Non Exportable Certificate</strong></h4>

<p>To create a non-exportable certificate when creating the certificate use <a href="https://docs.microsoft.com/en-us/powershell/module/azurerm.keyvault/new-azurekeyvaultcertificatepolicy?view=azurermps-4.1.0"><em>KeyNotExportable</em> flag</a> flag as below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="nv">$certificatepolicy</span> <span class="p">=</span> <span class="nb">New-AzureKeyVaultCertificatePolicy</span>   <span class="n">-SubjectName</span> <span class="s2">&quot;CN=www.rahulpnath.com&quot;</span>   <span class="n">-IssuerName</span> <span class="n">Self</span>   <span class="n">-ValidityInMonths</span> <span class="n">12</span> <span class="n">-KeyNotExportable</span>
</span><span class='line'><span class="nb">Add-AzureKeyVaultCertificate</span> <span class="n">-VaultName</span> <span class="s2">&quot;VaultFromCode&quot;</span> <span class="n">-Name</span> <span class="s2">&quot;TestCertificateNE&quot;</span> <span class="n">-CertificatePolicy</span> <span class="nv">$certificatepolicy</span>
</span></code></pre></td></tr></table></div></figure>


<p>Executing this creates three objects in the vault as above. But since we marked the secret as non-exportable, the Secret will not have the private part of the key. We can create an in-memory representation of the certificate, but we cannot use the PrivateKeySignature as the certificate does not have the private key. We need to use the Key created along with the certificate to <em>Sign</em> the PDF bytes. For this we need a custom implementation of <em>IExternalSignature</em> - KeyVaultSignature.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">KeyVaultSignature</span> <span class="p">:</span> <span class="n">IExternalSignature</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">private</span> <span class="n">KeyVaultClient</span> <span class="n">keyClient</span><span class="p">;</span>
</span><span class='line'>    <span class="k">private</span> <span class="kt">string</span> <span class="n">keyIdentifier</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="nf">KeyVaultSignature</span><span class="p">(</span><span class="n">KeyVaultClient</span> <span class="n">client</span><span class="p">,</span> <span class="kt">string</span> <span class="n">keyIdentifier</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">keyClient</span> <span class="p">=</span> <span class="n">client</span><span class="p">;</span>
</span><span class='line'>        <span class="k">this</span><span class="p">.</span><span class="n">keyIdentifier</span> <span class="p">=</span> <span class="n">keyIdentifier</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetEncryptionAlgorithm</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;RSA&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetHashAlgorithm</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;SHA-256&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">public</span> <span class="kt">byte</span><span class="p">[]</span> <span class="nf">Sign</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="n">message</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">hasher</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SHA256CryptoServiceProvider</span><span class="p">();</span>
</span><span class='line'>        <span class="kt">var</span> <span class="n">digest</span> <span class="p">=</span> <span class="n">hasher</span><span class="p">.</span><span class="n">ComputeHash</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">keyClient</span>
</span><span class='line'>            <span class="p">.</span><span class="n">SignAsync</span><span class="p">(</span>
</span><span class='line'>                <span class="n">keyIdentifier</span><span class="p">,</span>
</span><span class='line'>                <span class="n">Microsoft</span><span class="p">.</span><span class="n">Azure</span><span class="p">.</span><span class="n">KeyVault</span><span class="p">.</span><span class="n">WebKey</span><span class="p">.</span><span class="n">JsonWebKeySignatureAlgorithm</span><span class="p">.</span><span class="n">RS256</span><span class="p">,</span>
</span><span class='line'>                <span class="n">digest</span><span class="p">)</span>
</span><span class='line'>            <span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Result</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>KeyVaultSignature uses the key vault library to connect to the vault and use the specified key to sign the passed in PDF bytes. Since the key is the private part of the certificate, it will be validated by the public key. Below code shows how to use the KeyVaultSignature in the signing process.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">private</span> <span class="k">static</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">SignPdfWithNonExportableCertificateInKeyVault</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="n">GetKeyVaultClient</span><span class="p">();</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">exportableSecretIdentifier</span> <span class="p">=</span> <span class="s">&quot;https://vaultfromcode.vault.azure.net:443/secrets/TestCertificateNE&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">certificate</span> <span class="p">=</span> <span class="k">await</span> <span class="n">GetCertificateKeyVault</span><span class="p">(</span><span class="n">exportableSecretIdentifier</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">keyIdentifier</span> <span class="p">=</span> <span class="s">&quot;https://vaultfromcode.vault.azure.net:443/keys/TestCertificateNE/65d27605fdf74eb2a3f807827cd756e1&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">externalSignature</span> <span class="p">=</span> <span class="k">new</span> <span class="n">KeyVaultSignature</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">keyIdentifier</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">SignPdf</span><span class="p">(</span><span class="n">certificate</span><span class="p">,</span> <span class="n">externalSignature</span><span class="p">,</span> <span class="s">&quot;Non Exportable Key Vault.pdf&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once you install and trust the public portion of the certificates, you can see the green tick, indicating that the PDF is verified and signed.</p>

<p><img src="http://rahulpnath.com/images/pdf_signed.png" alt="Signed PDF" /></p>

<p>The sample code for all three scenarios is available <a href="https://github.com/rahulpnath/Blog/tree/master/PDFSign">here</a>. I have used ClientId/Secret to authenticate with Key Vault for the sample code. If you are using this in a production environment, I will recommend using <a href="http://www.rahulpnath.com/blog/authenticating-a-client-application-with-azure-key-vault/">certificate to authenticate with Key Vault</a>. iText supports creating PDF stamps and more features in the signing process, which is well documented. Hope this helps you to secure your PDF files.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Beyond Compare - Compare Files Quick and Easy]]></title>
    <link href="http://rahulpnath.com/blog/beyond-compare-compare-files-quick-and-easy/"/>
    <updated>2017-07-13T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/beyond-compare-compare-files-quick-and-easy</id>
    <content type="html"><![CDATA[<p>Merging conflicts can be a pain when working in large teams and code bases change fast. Every time you sync with the main code base you need to make sure that you integrate the updates with your work in progress. It&rsquo;s great when the changes get automatically merged by the source control systems. But when things need to be manually merged is where a good tool can be of help.</p>

<p><img src="http://rahulpnath.com/images/beyond_compare.png" class="center" alt="Beyond Compare"></p>

<blockquote><p><em><a href="http://www.scootersoftware.com/index.php">Beyond Compare</a> allows you to quickly and easily compare your files and folders.  By using simple, powerful commands, you can focus on the differences you&rsquo;re interested in and ignore those you&rsquo;re not.  You can then merge the changes, synchronize your files, and generate reports for your records.</em></p></blockquote>

<p>The <a href="http://www.scootersoftware.com/features.php?zz=features_multifaceted">Text Compare</a> viewer is the one that I use most frequently to compare or merge different versions of code. Beyond Compare makes it easy to spot the code differences and gives the capability to copy the code from one version to another. One can also copy portions of changes and merge just that instead of all the changes. The 3-Way Text Merge feature is also useful, especially when you are using Git.</p>

<p>Beyond Compare has a Standard and a Pro Edition with a lot of <a href="http://www.scootersoftware.com/features.php?zz=features_list">features</a>. I have the Pro Edition license for Beyond Compare, thanks to <a href="http://www.rahulpnath.com/blog/finding-a-job-abroad/">Readify</a> for the Software allowance that you get every year.</p>

<p>Beyond Compare is one of the <a href="http://www.rahulpnath.com/blog/tools-that-I-use/">tools that I use almost daily</a>. Check it out if you have not already.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Review: Pixel, Phone by Google - Made by Google]]></title>
    <link href="http://rahulpnath.com/blog/review-pixel/"/>
    <updated>2017-07-12T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/review-pixel</id>
    <content type="html"><![CDATA[<p>When it comes to mobile phones, I used to be a gadget freak and buy the latest phone as soon as it arrives in the market. But not after I got the <a href="http://www.rahulpnath.com/blog/review-two-months-and-counting-android-and-nexus-5/">Nexus 5</a>. It&rsquo;s been well over three years now and not even once did I want to switch over to something else. The phone never slowed down over these years, and the battery lasted enough for the day. I broke the Nexus screen a couple of months back and was forced to switch over to a new phone. I didn&rsquo;t have to do much market research or phone comparisons this time; as I just knew which one to pick up.</p>

<p><a href="https://madeby.google.com/intl/en_au/phone/">The Pixel, Phone By Google!</a></p>

<p><img src="http://rahulpnath.com/images/pixel.png" alt="Pixel" class="center" /></p>

<h4><strong>Key Features</strong></h4>

<p>The Pixel is the first phone in the Google Pixel hardware line and is a successor to the Nexus range of devices. The Pixel runs <a href="https://www.android.com/intl/en_au/versions/nougat-7-0/">Android-Nougat</a> with some features exclusive to it. The Pixel is very much comparable to the Nexus, with improved hardware and latest software. Below are some of the key features that I like about the phone.</p>

<ul>
<li><p><strong>Fingerprint sensor</strong> The fingerprint sensor on the back allows you to unlock the phone and specific apps and also authorize purchases. <a href="http://www.rahulpnath.com/blog/password-manager-get-one-if-you-havent-already/">1Password</a> is integrated with the sensor which enables me to unlock it using the sensor. I no longer need to type in my long master password every time I use 1Password.</p></li>
<li><p><strong>Camera</strong> <em>Pixel takes brilliant photos in bright light, low light, and any light.</em> The camera is awesome and at times is a good replacement for your <a href="http://www.rahulpnath.com/blog/photography-learning-to-click/">DSLR</a>. With Pixel, Google also provides unlimited original quality storage for all photos and videos.</p></li>
<li><p><strong>Google Assistant</strong> Pixel is the first phone with the <a href="https://assistant.google.com/">Google Assistant</a> built-in. It helps you manage tasks, find content on phone and the internet, perform actions, etc. just like Siri or Cortana. I have not used the assistant much and yet to find some valid use cases.</p></li>
</ul>


<h4><strong>Apps</strong></h4>

<p> Some of the apps that I use regularly are</p>

<ul>
<li><a href="http://www.rahulpnath.com/blog/todoist-manage-your-todo-list/">Todoist</a>: My ToDo List</li>
<li><a href="http://www.rahulpnath.com/blog/feedly-one-stop-reading-place/">Feedly</a>: For all my RSS feeds</li>
<li><a href="http://www.rahulpnath.com/blog/pocket-offline-reading-made-easy/">Pocket</a>: For offline reading and read later</li>
<li><a href="http://www.rahulpnath.com/blog/password-manager-get-one-if-you-havent-already/">1Password</a>: Password Manager</li>
<li><a href="http://www.rahulpnath.com/blog/buffer-smarter-social-sharing/">Buffer</a>: To schedule articles to all social networks</li>
<li><a href="http://www.rahulpnath.com/blog/rescue-time-track-your-time/">Rescue Time</a>: Automatically tracks where I spent time on mobile</li>
<li><a href="http://www.rahulpnath.com/blog/three_months_to_a_half_marathon/">Strava, Runtastic &amp; Garmin Connect</a>: Tracking my runs and exercises</li>
<li><a href="https://play.google.com/store/apps/details?id=com.amazon.kindle">Kindle</a>: Reading kindle books</li>
<li>Twitter, Whatsapp, Messenger, Instagram, Skype &amp; Yammer :Social Networking apps</li>
<li><a href="http://www.rahulpnath.com/blog/optimizing-octopress-workflow-for-new-posts/">JotterPad</a>: Write articles for blog in markdown format</li>
<li><a href="http://www.rahulpnath.com/blog/how-to-setup-google-indic-keyboard-on-your-android-phone/">Google Indic Keyboard</a>: Writing in my native language</li>
<li>Gmail &amp; Outlook: Emails</li>
<li>Youtube: Videos</li>
</ul>


<h4><strong>Case </strong></h4>

<p>I am using the <a href="http://www.rahulpnath.com/blog/spigen-awesome-phone-cases/">Spigen Neo Hybrid</a> case for Pixel. It adds extra weight to the phone, but I am used to it from my Nexus as well. The Neo Hybrid provides military grade protection and protects the phone from most falls.</p>

<p>Overall I have found the Pixel a good phone and recommend it to anyone looking out for a new phone now. The Samsung Galaxy S8 is also of the same range (slightly costlier) and worth considering if you are not too particular about having a vanilla Android experience. Which phone do you use?</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Grammarly - Improve Your Writing]]></title>
    <link href="http://rahulpnath.com/blog/grammarly-improve-your-writing/"/>
    <updated>2017-07-07T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/grammarly-improve-your-writing</id>
    <content type="html"><![CDATA[<p><a href="https://www.grammarly.com/">Grammarly</a> is a writing platform that helps you polish your writing. Grammarly scans your text for mistakes based on pre-written rules and suggests modifications. A detailed explanation is given on the suggestions made and helps improve your writing over a period.</p>

<blockquote><p><em>Grammarly makes sure everything you type is clear, effective, and mistake-free.</em></p></blockquote>

<p>With the <a href="https://chrome.google.com/webstore/detail/grammarly-for-chrome/kbfnbcaeplbcioakkpcpgfkobkghlhen?hl=en">chrome plugin, Grammarly</a> is there everywhere that you write on the web. It hides away neatly to a corner without getting in the way of your writing.</p>

<p><img src="http://rahulpnath.com/images/grammarly_facebook.png" alt="Grammarly Chrome plugin" class ="center" /></p>

<p>You can author text either in the website, or have Grammarly watch your back as you type anywhere in Chrome with the plugin, integrate it with Microsoft Office or use the Windows app. Check out the <a href="https://app.grammarly.com/apps">apps section</a> to get more details. You can try Grammarly for free and check for critical grammar and spelling mistakes. With the <a href="https://www.grammarly.com/premium">premium version</a> you get a lot more features and grammar rules. Currently, I am on the premium version and recommend it.</p>

<p>Try <a href="https://www.grammarly.com/i/personalize?install=true">Grammarly for free</a> and see if it helps you as well.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Left Align Your Code For Better Readability]]></title>
    <link href="http://rahulpnath.com/blog/left-align-your-code-for-better-readability/"/>
    <updated>2017-07-03T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/left-align-your-code-for-better-readability</id>
    <content type="html"><![CDATA[<p>Aesthetics of code is as important as the code you write. Aligning is an important part that contributes to the overall aesthetics of code. The importance of code aesthetics struck me while on a recent project. Below are some the code samples that I came across in the project. Traversing this code base was painful to me as the code was all over the place.</p>

<figure class='code'><figcaption><span>Bad Formatting</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Account</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span>   <span class="n">Id</span>                    <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">ClientId</span>              <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span>   <span class="n">ContactId</span>             <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">UserName</span>              <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span>                  <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Company</span>               <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Address</span>               <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">BillingAddress</span>        <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Bad Formatting</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">ConnectToServer</span><span class="p">(</span><span class="kt">string</span> <span class="n">username</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">password</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">server</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code has too many alignment points that attract the eye which makes it hard to read in the first place. When in isolation this might still be fine to read, but with such a style across the code base, it soon becomes a pain for your eyes and your mind. When refactoring code, it becomes even harder as you need to put in the extra effort to make sure that this fancy alignment is maintained. Let&rsquo;s take a look at how even changing a property name (<em>Company to CompanyName</em>) or function name(<em>ConnectToServer to Connect</em>) will affect the current formatting.</p>

<figure class='code'><figcaption><span>Renamed to CompanyName</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Account</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span>              <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">CompanyName</span>           <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Address</span>           <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Renamed to Connect</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">Connect</span><span class="p">(</span><span class="kt">string</span> <span class="n">username</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">password</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">server</span><span class="p">,</span>
</span><span class='line'>                       <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see above the formatting is now all over the place, and you need to format them into place manually. Again when in isolation this might seem like a few press of spacebar. But when the property/function that you rename is used in multiple places this soon becomes a problem. Such code formatting introduces maintenance overhead and soon falls out of place if something gets missed.</p>

<h3>Better Ways To Format Code</h3>

<p>Left aligning code is one of the key things that I try to follow always. Keeping the code aligned to the left makes it easier to read (assuming that you are programming in a language written from left to right). Since we read from left to right having most of the code aligned to the left means that you have more code visible. Left aligning also means that you would almost avoid the need to scroll the code editor when reading through the code horizontally.</p>

<p>Let&rsquo;s take a look how left aligning the above code will look like.</p>

<figure class='code'><figcaption><span>Left Aligned</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="k">class</span> <span class="nc">Account</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span> <span class="n">Id</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">ClientId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">long</span> <span class="n">ContactId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">UserName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Company</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">Address</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'>    <span class="k">public</span> <span class="kt">string</span> <span class="n">BillingAddress</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Left Aligned Multiple Lines</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">ConnectToServer</span><span class="p">(</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">username</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">password</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">server</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Left Aligned Single Line</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="k">public</span> <span class="nf">ConnectToServer</span><span class="p">(</span>
</span><span class='line'>    <span class="kt">string</span> <span class="n">username</span><span class="p">,</span> <span class="kt">string</span> <span class="n">password</span><span class="p">,</span> <span class="kt">string</span> <span class="n">server</span><span class="p">,</span> <span class="kt">string</span> <span class="n">port</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see above left aligning makes it much easier to read and also reduces the number of alignment points. This is also refactoring friendly as there are no specific space patterns that need to be maintained. As for the parameters in a single line VS parameters in multiple lines (as above), I prefer the multi-line approach, as it keeps the code further aligned to the left and also reduces the chance of getting a horizontal scroll bar. You can use <a href="http://www.rahulpnath.com/blog/introducing-code-formatting-into-a-large-codebase/">Column Guides</a> to remind yourself to keep the code within the acceptable horizontal space.</p>

<p>Code formatting is an important aspect of coding. It is important that as a team you need to agree on some standard practices and find ways to stick to it. You can use <a href="http://www.rahulpnath.com/blog/introducing-code-formatting-into-a-large-codebase/">styling tools</a>, <a href="http://www.rahulpnath.com/blog/code-review/">Code Reviews</a>, etc. to make sure it does not get missed. It takes a while for any new practices to set in, but soon it will be of second nature and easy to follow.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Fiddler - Free Web Debugging Proxy]]></title>
    <link href="http://rahulpnath.com/blog/fiddler-free-web-debugging-proxy/"/>
    <updated>2017-06-29T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/fiddler-free-web-debugging-proxy</id>
    <content type="html"><![CDATA[<p><a href="http://www.telerik.com/fiddler">Fiddler</a> is an HTTP debugging proxy server application and captures HTTP and HTTPS traffic. It is one of the tools in my <a href="http://www.rahulpnath.com/blog/tools-that-I-use/">essential toolkit list</a>. Fiddler allows debugging traffic from PC, MAC, Linux and mobile systems. It helps inspect the raw requests and responses between the client and the server.</p>

<p><img src="http://rahulpnath.com/images/fiddler_inspectors.png" alt="Fiddler" class="center" ></p>

<p>Some of the key features that I often use in Fiddler are</p>

<ul>
<li><p><a href="http://docs.telerik.com/fiddler/Observe-Traffic/Tasks/ViewSessionContent">Inspect Request/Response</a>
Look into the request and response data to see if all the required headers/attributes are set, and the data is sent as expected</p></li>
<li><p><a href="http://www.rahulpnath.com/blog/using-fiddler-to-help-in-manual-testing/">Compose Web Requests</a>
Manually compose requests to send to server and test endpoints.</p></li>
<li><p><a href="http://www.rahulpnath.com/blog/simulating-delays-in-http-calls-for-manual-tests/">AutoRespond to Requests</a>
Intercept requests from the browser and send back a pre-defined response or create a delay in response to the actual client.</p></li>
<li><p><a href="http://docs.telerik.com/fiddler/Observe-Traffic/Tasks/ViewSessionStatistics">Statistics</a>
Fiddler statistics give an overview of the performance details of a web session, indicating where the time is spent in the whole request/response cycle.</p></li>
<li><p><a href="http://docs.telerik.com/fiddler/Generate-Traffic/Tasks/ResendRequest">Modify and Replay a Request</a>
Fiddler allows modifying the request by editing its contents and replay the message to the server.</p></li>
<li><p><a href="http://docs.telerik.com/fiddler/Save-And-Load-Traffic/Tasks/CreateSAZ">Export and Import</a>
Fiddler makes it easy to share captured traces with different people. All captured traffic or selected requests can be exported and shared with others. The exported saz file can be opened in Fiddler to view back all the session details.</p></li>
</ul>


<p>These are some of the features that I use on a regular basis. Fiddler supports a lot more and is extensible to support custom requirements as well. I find it an indispensable tool when developing for the Web. <a href="https://www.telerik.com/download/fiddler">Get Fiddler</a> if you have not already.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Using Git Locally in a TFVC Repository]]></title>
    <link href="http://rahulpnath.com/blog/using-git-locally-in-a-tfvc-repository/"/>
    <updated>2017-06-21T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/using-git-locally-in-a-tfvc-repository</id>
    <content type="html"><![CDATA[<p>The project that I am currently working on using <a href="https://www.visualstudio.com/en-us/docs/tfvc/overview">Team Foundation Version Control</a>(TFVC) as it&rsquo;s source control. After <a href="http://www.rahulpnath.com/blog/git-checkout-tfs/">using Git</a> for a long time it felt hard to move back to TFVC. One of the biggest pain for me is losing the short commits that I do when working. Short commits help keep track of the work and also quickly revert unwanted changes. Branching is also much easier with Git and allows to switch between work without much hassle of &lsquo;<em>shelving -> undoing -> pulling back the latest as with TFS.</em>&rsquo;</p>

<p><img src="http://rahulpnath.com/images/tfvc_local_git.png" alt="Use Git Locally in a TFVC Repository" class="center" /></p>

<p>The best part with git is that you can use it to work with any folder in your system and does not need any setup. By just running &lsquo;<em><a href="https://git-scm.com/docs/git-init">git init</a></em>&rsquo; it initializes a git repository in the folder. Running <em>init</em> against my local TFVC source code folder, I initialized a git repository locally. Now it allows me to work locally using git - make commits, revert, change branches, etc. Whenever I reach a logical end to the work, I create a shelveset and push the changes up the TFVC source control from Visual Studio.</p>

<p>If you want to interact with the TFVC source control straight from the command line, you can try out <a href="https://github.com/git-tfs/git-tfs">git-tfs</a> - a Git/TFS bridge. For me, since I am happy working locally with git and pushing up the finished work as shelvesets from Visual Studio I have not explored the git-tfs tool.</p>

<p>Hope this helps someone if you feel stuck with TFVC repositories!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Semantic Comparison: Improve Test Assertions]]></title>
    <link href="http://rahulpnath.com/blog/semantic-comparison-improve-test-assertions/"/>
    <updated>2017-06-20T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/semantic-comparison-improve-test-assertions</id>
    <content type="html"><![CDATA[<p>One of the traits of a good unit test is to have just <a href="http://osherove.com/blog/2005/4/14/try-to-avoid-multiple-asserts-in-a-single-unit-test.html">one Assert statement.</a>.</p>

<blockquote><p><em>Consider Assert failures as symptoms of a disease and Asserts as indication points or blood checks for the body of the software. The more symptoms you can find, the easier the disease will be to figure out and remove. If you have multiple asserts in one test - only the first failing one reveals itself as failed and you lose sight of other possible symptoms.</em></p>

<p>-<a href="http://osherove.com/">Roy Osherove</a></p></blockquote>

<p>When a test with multiple asserts fails, it is hard to tell the exact reason of test failure. To get more details on the actual failure we either have to debug the tests or look into the stack trace.</p>

<h3>Tests With Multiple Assertions</h3>

<p>Many times we end up needing to assert on more than one properties or behavior. Let&rsquo;s look at a few such examples and see how we can refactor the tests. <em>I have excluded the actual code that is getting is tested here as it is easy to understand what that will look like from the tests. (Drop a comment otherwise)</em></p>

<p><strong>Example 1:</strong> In the below test we have a <em>Name</em> class that represents FirstName and LastName of a user. It exposes a <em>Parse</em> method to make it easy for us to create a Name object from a string. Below are some tests for the Parse method. The test has multiple assertions to confirm that the first and last name properties get set as expected.</p>

<figure class='code'><figcaption><span>Name class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul&quot;, &quot;Rahul&quot;, &quot;&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul Nath&quot;, &quot;Rahul&quot;, &quot;Nath&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul P Nath&quot;, &quot;Rahul&quot;, &quot;P Nath&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">FirstNameOnlyProvidedResultsInFirstNameSet</span><span class="p">(</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">name</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expFirstName</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expLastName</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">Name</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">expFirstName</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">FirstName</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">expLastName</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">LastName</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 2:</strong> The below test is for the <em>Controller</em> class to confirm that the <em>CustomerViewModel</em> passed to the <em>Post</em> method on the controller saves the <em>Customer</em> to the repository. The assert statement includes multiple properties of the customer object, which is just a shorthand version of writing multiple such assert statements on each of those properties.</p>

<figure class='code'><figcaption><span>Controller Unit Test</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory, AutoWebData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">PostSavesToRepository</span><span class="p">(</span>
</span><span class='line'>    <span class="n">CustomerViewModel</span> <span class="n">model</span><span class="p">,</span>
</span><span class='line'><span class="na">    [Frozen]</span><span class="n">Mock</span><span class="p">&lt;</span><span class="n">ICustomerRepository</span><span class="p">&gt;</span> <span class="n">customerRepository</span><span class="p">,</span>
</span><span class='line'>    <span class="n">CustomerController</span> <span class="n">sut</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">var</span> <span class="n">expected</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ToCustomer</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sut</span><span class="p">.</span><span class="n">Post</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">customerRepository</span><span class="p">.</span><span class="n">Verify</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span>
</span><span class='line'>    <span class="n">a</span><span class="p">.</span><span class="n">Upsert</span><span class="p">(</span><span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;(</span><span class="n">customer</span> <span class="p">=&gt;</span>
</span><span class='line'>        <span class="n">customer</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="n">expected</span><span class="p">.</span><span class="n">Name</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>        <span class="n">customer</span><span class="p">.</span><span class="n">Age</span> <span class="p">==</span> <span class="n">expected</span><span class="p">.</span><span class="n">Age</span> <span class="p">&amp;&amp;</span>
</span><span class='line'>        <span class="n">customer</span><span class="p">.</span><span class="n">Phone</span> <span class="p">==</span> <span class="n">customer</span><span class="p">.</span><span class="n">Phone</span><span class="p">))</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 3:</strong> The below test ensures that all properties are set when transforming from DTO to domain entity (or any such object transformations at system boundaries). The test asserts on every property of the class.</p>

<figure class='code'><figcaption><span>Comparing different object types</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[AutoMoqData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">AllowanceToDomainModelMapsAllProperties</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Persistence</span><span class="p">.</span><span class="n">Allowance</span> <span class="n">allowance</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">random</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">allowance</span><span class="p">.</span><span class="n">EndDate</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">StartDate</span><span class="p">.</span><span class="n">AddDays</span><span class="p">(</span><span class="n">random</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">ToDomainModel</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">ClientId</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">ClientId</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">Credit</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Credit</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">Data</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Data</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">StartDate</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">StartDate</span><span class="p">);</span>
</span><span class='line'>    <span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">allowance</span><span class="p">.</span><span class="n">EndDate</span><span class="p">,</span> <span class="n">actual</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">EndDate</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Semantic Comparison Library</h3>

<p><a href="https://www.nuget.org/packages/SemanticComparison/">Semantic Comparison</a> is a library that allows deep comparison of similar looking objects. Originally part of <a href="http://www.rahulpnath.com/blog/autofixture-make-your-unit-tests-robust/">AutoFixture</a> library, it is also available as a separate <a href="https://www.nuget.org/packages/SemanticComparison/">Nuget package</a>.</p>

<blockquote><p><em>SemanticComparison makes it easier to compare instances of various objects to each other. Instead of performing a normal equality comparison, SemanticComparison compares objects that look semantically similar - even if they are of different types</em></p></blockquote>

<p>Using SemanticComparison, we can compare two objects and compare their properties for equality. It allows including/excluding properties when comparing objects.</p>

<h3>Refactoring Tests</h3>

<p><strong>Example 1:</strong> The <em>Name</em> is a perfect case for being a <a href="http://www.rahulpnath.com/blog/thinking-beyond-primitive-values-value-objects/">Value Object</a>. In this case, the class will override Equals, and it will be easier for us to write the tests. Converting to a Value Object is one of the cases where we <a href="http://www.rahulpnath.com/blog/tests-as-a-feedback-tool/">use tests as a feedback to improve code</a>. But in cases where you do not have the control over the class or do not want to make it a value object, we can use SemanticComparison to help check for equality as shown below.</p>

<figure class='code'><figcaption><span>Name Class</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul&quot;, &quot;Rahul&quot;, &quot;&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul Nath&quot;, &quot;Rahul&quot;, &quot;Nath&quot;)]</span>
</span><span class='line'><span class="na">[InlineData(&quot;Rahul P Nath&quot;, &quot;Rahul&quot;, &quot;P Nath&quot;)]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">FirstNameOnlyProvidedResultsInFirstNameSet</span><span class="p">(</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">name</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expFirstName</span><span class="p">,</span>
</span><span class='line'>   <span class="kt">string</span> <span class="n">expLastName</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">var</span> <span class="n">expected</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Name</span><span class="p">(</span><span class="n">expFirstName</span><span class="p">,</span> <span class="n">expLastName</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">Name</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">expected</span>
</span><span class='line'>        <span class="p">.</span><span class="n">AsSource</span><span class="p">()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">OfLikeness</span><span class="p">&lt;</span><span class="n">Name</span><span class="p">&gt;()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">ShouldEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 2:</strong>  Using SemanticComparison we can remove the need of asserting on each of the properties. In the below case since the Customer Id is set to a new Guid in the ToCustomer method, I ignore the Id property from the comparison using <em>Without</em>. When the <em>expected</em> objects gets compared against the <em>actual</em> all properties except <em>Id</em> will be compared for equality. Any number of properties can be excluded by chaining multiple <em>Without</em> methods.</p>

<figure class='code'><figcaption><span>Controller Unit Test</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory, AutoWebData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">PostSavesToRepository</span><span class="p">(</span>
</span><span class='line'>    <span class="n">CustomerViewModel</span> <span class="n">model</span><span class="p">,</span>
</span><span class='line'><span class="na">    [Frozen]</span><span class="n">Mock</span><span class="p">&lt;</span><span class="n">ICustomerRepository</span><span class="p">&gt;</span> <span class="n">customerRepository</span><span class="p">,</span>
</span><span class='line'>    <span class="n">CustomerController</span> <span class="n">sut</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="kt">var</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ToCustomer</span><span class="p">();</span>
</span><span class='line'>  <span class="kt">var</span> <span class="n">expected</span> <span class="p">=</span> <span class="n">customer</span>
</span><span class='line'>      <span class="p">.</span><span class="n">AsSource</span><span class="p">()</span>
</span><span class='line'>      <span class="p">.</span><span class="n">OfLikeness</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;()</span>
</span><span class='line'>      <span class="p">.</span><span class="n">Without</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">sut</span><span class="p">.</span><span class="n">Post</span><span class="p">(</span><span class="n">model</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">customerRepository</span><span class="p">.</span><span class="n">Verify</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span>
</span><span class='line'>    <span class="n">a</span><span class="p">.</span><span class="n">Upsert</span><span class="p">(</span><span class="n">It</span><span class="p">.</span><span class="n">IsAny</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;(</span><span class="n">actual</span> <span class="p">=&gt;</span>
</span><span class='line'>        <span class="n">expected</span><span class="p">.</span><span class="n">ShoudEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">)));</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Example 3:</strong>  Using SemanticComparison we can remove the asserts on every property and also set custom comparisons. The StartDate and EndDate on the persistence entity are converted into a DateRange object (Period). By using the <em>With</em> method in combination with the <em>EqualsWhen</em> method we can set custom comparison behavior that needs to be performed when comparing objects. The same test will hold true even if we add new properties and will force mapping to be updated if any of the property mappings is missed. Here we also see how SemanticComparison can compare two different types.</p>

<figure class='code'><figcaption><span>Comparing different object types</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='csharp'><span class='line'><span class="na">[Theory]</span>
</span><span class='line'><span class="na">[AutoMoqData]</span>
</span><span class='line'><span class="k">public</span> <span class="k">void</span> <span class="nf">AllowanceToDomainModelMapsAllProperties</span><span class="p">(</span>
</span><span class='line'>    <span class="n">Persistence</span><span class="p">.</span><span class="n">Allowance</span> <span class="n">allowance</span><span class="p">,</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">random</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">allowance</span><span class="p">.</span><span class="n">EndDate</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">StartDate</span><span class="p">.</span><span class="n">AddDays</span><span class="p">(</span><span class="n">random</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">var</span> <span class="n">actual</span> <span class="p">=</span> <span class="n">allowance</span><span class="p">.</span><span class="n">ToDomainModel</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">allowance</span>
</span><span class='line'>        <span class="p">.</span><span class="n">AsSource</span><span class="p">()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">OfLikeness</span><span class="p">&lt;</span><span class="n">Allowance</span><span class="p">&gt;()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">With</span><span class="p">(</span><span class="n">a</span> <span class="p">=&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">Period</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="n">EqualsWhen</span><span class="p">((</span><span class="n">p</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="n">m</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">StartDate</span> <span class="p">==</span> <span class="n">p</span><span class="p">.</span><span class="n">StartDate</span> <span class="p">&amp;&amp;</span> <span class="n">m</span><span class="p">.</span><span class="n">Period</span><span class="p">.</span><span class="n">EndDate</span> <span class="p">==</span> <span class="n">p</span><span class="p">.</span><span class="n">EndDate</span><span class="p">;</span> <span class="p">})</span>
</span><span class='line'>        <span class="p">.</span><span class="n">ShouldEqual</span><span class="p">(</span><span class="n">actual</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using SemanticComparison library, we reduce the dependencies on the actual implementation and extract that into a more generic representation. Fewer dependencies on the actual implementation code/properties make the tests more robust and adaptable to change. Hope this helps you get started with Semantic Comparison and improve on your test assertions.</p>

<p><strong>References:</strong></p>

<ul>
<li><a href="http://blog.ploeh.dk/2012/06/21/TheResemblanceidiom/">The Resemblance Idiom</a></li>
<li><a href="http://blog.ploeh.dk/2010/06/29/IntroducingAutoFixtureLikeness/">Introducing AutoFixture Likeness</a></li>
<li><a href="http://blog.ploeh.dk/2012/06/22/ResemblanceandLikeness/">Resemblance and Likeness</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: Spigen - Awesome Phone Cases]]></title>
    <link href="http://rahulpnath.com/blog/spigen-awesome-phone-cases/"/>
    <updated>2017-06-15T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/spigen-awesome-phone-cases</id>
    <content type="html"><![CDATA[<p>If you are looking to get a case for your phone, then check out cases by <a href="https://www.spigen.com/">Spigen</a>. I have been using Spigen cases for over three years, and I totally recommend it.</p>

<p>Spigen cases are made with premium materials and are slim, sleek and simple. Spigen provides various models that match different needs. The cases provide <a href="https://www.spigen.com/pages/military-grade">Military Grade Protection</a> and protect the phone from most falls.</p>

<p>The first Spigen cases I got was for my <a href="http://www.rahulpnath.com/blog/review-two-months-and-counting-android-and-nexus-5/">Nexus 5</a>. The Neo Hybrid lasted for over three years. With the Spigen cases, the Nexus was well protected. It did fall from my hands many times, and every time the case protected it well enough. A couple of months back the Spigen case broke, and I had been using the phone without a cover since then. Unfortunately, during one of my <a href="http://www.rahulpnath.com/blog/three_months_to_a_half_marathon/">morning runs</a> the phone fell from my hands while slipping it into the armband. Without the Spigen to protect it, the Nexus screen broke at the corners.</p>

<p><img src="http://rahulpnath.com/images/spigen_pixel.png" alt="Spigen Neo Hybrid for Pixel" class="center" /></p>

<p>A month back I switched over to Google Pixel as the Nexus was becoming unusable with the broken screen. I got the <a href="https://www.spigen.com/collections/pixel/products/google-pixel-case-neo-hybrid?variant=29248762049">Spigen NeoHybrid for Pixel</a>. The case provides dual layer protection with TCU and PC bumper and comes with fingerprint resistance. The precise cutouts give easy access to all buttons and fingerprint sensor.</p>

<p>If you are looking to a get a case, check out if <a href="https://www.spigen.com/">Spigen</a> has one for your model!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Azure Key Vault From Node.js]]></title>
    <link href="http://rahulpnath.com/blog/azure-key-vault-from-node-dot-js/"/>
    <updated>2017-06-12T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/azure-key-vault-from-node-dot-js</id>
    <content type="html"><![CDATA[<p><img src="http://rahulpnath.com/images/nodejs_keyvault.png" alt="Azure Key Vault from Node js" class="center" /></p>

<p>If you develop on Node.js, you can use the <a href="https://github.com/Azure/azure-sdk-for-node">Azure SDK for Node</a> that makes it easy to consume and manage Microsoft Azure Services. In this post let&rsquo;s explore how to use the node SDK to connect to Azure Key Vault and interact with the vault objects. If you are new to key vault check out my <a href="http://www.rahulpnath.com/blog/category/azure-key-vault/">other posts here to get started</a>.</p>

<p>The <a href="https://www.npmjs.com/package/azure-keyvault">azure-keyvault</a> npm (node package manager) package allows accessing keys, secrets, and certificates on Azure Key Vault. It required Node.js version 6.x.x or higher. You can get the <a href="https://nodejs.org/en/">latest Node.js version here</a>.</p>

<blockquote><p><strong>Package Features</strong></p>

<ul>
<li><p><em>Manage keys: create, import, update, delete, backup, restore, list and get.</em></p></li>
<li><p><em>Key operations: sign, verify, encrypt, decrypt, wrap, unwrap.</em></p></li>
<li><p><em>Secret operations: set, get, update and list.</em></p></li>
<li><p><em>Certificate operations: create, get, update, import, list, and manage contacts and issuers.</em></p></li>
</ul>
</blockquote>

<p>It is easy to setup a new project and execute code using Node. The ease of setup is one of the things that I liked about node. To try out the Key Vault package, you can start fresh in a new folder and create a javascript file - <em>main.js</em> (you can name it anything you want).</p>

<p>The following packages are <em>required</em> to connect to the vault and authenticate. The <em><a href="https://www.npmjs.com/package/azure-keyvault">azure-keyvault</a></em> package as we saw above provides capabilities to interact with the vault. The <a href="https://www.npmjs.com/package/adal-node"><em>adal-node</em></a> is the Windows Active Directory Authentication Library for Node. The package makes it easy to authenticate to AAD to access AAD protected web resources. Applications using key vault need to <a href="http://www.rahulpnath.com/blog/authenticating-a-client-application-with-azure-key-vault/">authenticate using a token from an Azure AD Application</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">const</span> <span class="nx">KeyVault</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;azure-keyvault&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kr">const</span> <span class="p">{</span> <span class="nx">AuthenticationContext</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;adal-node&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h4><strong>Authenticate Using ClientId and Secret</strong></h4>

<p>Create the Azure AD application and the Secret key as shown in <a href="http://www.rahulpnath.com/blog/authenticating-a-client-application-with-azure-key-vault/">this post</a>. Grab the ClientId and Secret for authentication from the node application.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">const</span> <span class="nx">clientId</span> <span class="o">=</span> <span class="s2">&quot;CLIENT ID&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kr">const</span> <span class="nx">secret</span> <span class="o">=</span> <span class="s2">&quot;SECRET&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">secretAuthenticator</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">challenge</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AuthenticationContext</span><span class="p">(</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">authorization</span><span class="p">);</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">acquireTokenWithClientCredentials</span><span class="p">(</span>
</span><span class='line'>        <span class="nx">challenge</span><span class="p">.</span><span class="nx">resource</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">clientId</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">secret</span><span class="p">,</span>
</span><span class='line'>        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">tokenResponse</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">authorizationValue</span> <span class="o">=</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">tokenType</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">accessToken</span><span class="p">;</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">authorizationValue</span><span class="p">);</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>To access the vault, we need to create an instance of the KeyVaultClient object which taken in a Credentials as shown below. The KeyVaultClient has different methods exposes to interact with keys, secrets, and certificates in the vault. For e.g. To retrieve a secret from the vault the <em>getSecret</em> method is used passing in the secret identifier.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kr">const</span> <span class="nx">secretUrl</span> <span class="o">=</span> <span class="s2">&quot;https://rahulkeyvault.vault.azure.net/secrets/ApiKey/b56396d7a46f4f848481de2e149ef069&quot;</span><span class="p">;</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultCredentials</span><span class="p">(</span><span class="nx">secretAuthenticator</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultClient</span><span class="p">(</span><span class="nx">credentials</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">client</span><span class="p">.</span><span class="nx">getSecret</span><span class="p">(</span><span class="nx">secretUrl</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h4><strong>Authenticate Using ClientId and Certificate</strong></h4>

<p>To authenticate using ClientId and Certificate the AuthenticationContext exposes a function <em>acquireTokenWithClientCertificate</em> which takes in the certificate (pem format) and the certificate thumbprint. If you already have a certificate go ahead and use that. If not create a new test certificate as shown below</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>makecert -sv mykey.pvk -n <span class="s2">&quot;cn=AD Test Vault Application&quot;</span> ADTestVaultApplication.cer -b 03/03/2017 -e 06/05/2018 -r
</span><span class='line'>pvk2pfx -pvk mykey.pvk -spc ADTestVaultApplication.cer -pfx ADTestVaultApplication.pfx -po <span class="nb">test</span>
</span></code></pre></td></tr></table></div></figure>


<p>Create a new AD application and set it to use certificate authentication. Assign the application permissions to access the key vault.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='powershell'><span class='line'><span class="nv">$certificateFilePath</span> <span class="p">=</span> <span class="s2">&quot;C:\certificates\ADTestVaultApplication.cer&quot;</span>
</span><span class='line'><span class="nv">$certificate</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">System</span><span class="p">.</span><span class="n">Security</span><span class="p">.</span><span class="n">Cryptography</span><span class="p">.</span><span class="n">X509Certificates</span><span class="p">.</span><span class="n">X509Certificate2</span>
</span><span class='line'><span class="nv">$certificate</span><span class="p">.</span><span class="n">Import</span><span class="p">(</span><span class="nv">$certificateFilePath</span><span class="p">)</span>
</span><span class='line'><span class="nv">$rawCertificateData</span> <span class="p">=</span> <span class="nv">$certificate</span><span class="p">.</span><span class="n">GetRawCertData</span><span class="p">()</span>
</span><span class='line'><span class="nv">$credential</span> <span class="p">=</span> <span class="no">[System.Convert]</span><span class="p">::</span><span class="n">ToBase64String</span><span class="p">(</span><span class="nv">$rawCertificateData</span><span class="p">)</span>
</span><span class='line'><span class="nv">$startDate</span><span class="p">=</span> <span class="no">[System.DateTime]</span><span class="p">::</span><span class="n">Now</span>
</span><span class='line'><span class="nv">$endDate</span> <span class="p">=</span> <span class="nv">$startDate</span><span class="p">.</span><span class="n">AddYears</span><span class="p">(</span><span class="n">1</span><span class="p">)</span>
</span><span class='line'><span class="nv">$adApplication</span> <span class="p">=</span> <span class="nb">New-AzureRmADApplication</span> <span class="n">-DisplayName</span> <span class="s2">&quot;CertAdApplication&quot;</span> <span class="n">-HomePage</span>  <span class="s2">&quot;http://www.test.com&quot;</span> <span class="n">-IdentifierUris</span> <span class="s2">&quot;http://www.test.com&quot;</span> <span class="n">-CertValue</span> <span class="nv">$credential</span>  <span class="n">-StartDate</span> <span class="nv">$startDate</span> <span class="n">-EndDate</span> <span class="nv">$endDate</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$servicePrincipal</span> <span class="p">=</span> <span class="nb">New-AzureRmADServicePrincipal</span> <span class="n">-ApplicationId</span> <span class="nv">$adApplication</span><span class="p">.</span><span class="n">ApplicationId</span>
</span><span class='line'>
</span><span class='line'><span class="nb">Set-AzureRmKeyVaultAccessPolicy</span> <span class="n">-VaultName</span> <span class="s1">&#39;RahulKeyVault&#39;</span> <span class="n">-ServicePrincipalName</span> <span class="nv">$servicePrincipal</span><span class="p">.</span><span class="n">ServicePrincipalNames</span><span class="p">[</span><span class="n">0</span><span class="p">]</span> <span class="n">-PermissionsToSecrets</span> <span class="n">all</span> <span class="n">-PermissionToKeys</span> <span class="n">all</span>
</span></code></pre></td></tr></table></div></figure>


<p>To convert the pvk file into the pem format that is required by adal-node to authenticate with the AD application use the below command.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>openssl rsa -inform pvk -in mykey.pvk -outform pem -out mykey.pem
</span></code></pre></td></tr></table></div></figure>


<p>Using the pem encoded certificate private key, we can authenticate with the vault as shown below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">getPrivateKey</span><span class="p">(</span><span class="nx">filename</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">privatePem</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="p">{</span> <span class="nx">encoding</span><span class="o">:</span> <span class="s1">&#39;utf8&#39;</span> <span class="p">});</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">privatePem</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">certificateAuthenticator</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">challenge</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AuthenticationContext</span><span class="p">(</span><span class="nx">challenge</span><span class="p">.</span><span class="nx">authorization</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">acquireTokenWithClientCertificate</span><span class="p">(</span>
</span><span class='line'>        <span class="nx">challenge</span><span class="p">.</span><span class="nx">resource</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">clientId</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">getPrivateKey</span><span class="p">(</span><span class="s2">&quot;mykey.pem&quot;</span><span class="p">),</span>
</span><span class='line'>        <span class="s2">&quot;CERTIFICATE THUMBPRINT&quot;</span><span class="p">,</span>
</span><span class='line'>        <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">tokenResponse</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="kd">var</span> <span class="nx">authorizationValue</span> <span class="o">=</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">tokenType</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">tokenResponse</span><span class="p">.</span><span class="nx">accessToken</span><span class="p">;</span>
</span><span class='line'>            <span class="k">return</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">authorizationValue</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">)</span>
</span><span class='line'><span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>Using the <em>certificateAuthenticator</em> is the same as using the <em>secretAuthenticator</em>, by passing it to <em>KeyVaultCredentials</em></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultCredentials</span><span class="p">(</span><span class="nx">certificateAuthenticator</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyVault</span><span class="p">.</span><span class="nx">KeyVaultClient</span><span class="p">(</span><span class="nx">credentials</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">client</span><span class="p">.</span><span class="nx">getSecret</span><span class="p">(</span><span class="nx">secretUrl</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>To run the application first run <em>npm install</em> to install all the required packages and then execute the js file using <em>node main.js</em>. It fetches the secret value from the key vault using the certificate or secret authenticator. Hope this helps you to get started with Azure Key Vault from Node.js.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tip of the Week: PNGGauntlet - Smash PNGs for Faster Sites]]></title>
    <link href="http://rahulpnath.com/blog/pnggauntlet-smash-pngs-for-faster-sites/"/>
    <updated>2017-06-07T00:00:00+00:00</updated>
    <id>http://rahulpnath.com/blog/pnggauntlet-smash-pngs-for-faster-sites</id>
    <content type="html"><![CDATA[<p>When I upload images to my blog, I try to keep the file size as small as possible. Reducing image size helps improve the site load time. To grab screenshots I use <a href="http://www.rahulpnath.com/blog/screenshots-with-snagit/">Snagit</a> and use <a href="http://www.rahulpnath.com/blog/paint-dot-net/">Paint.net</a> for any editing and resizing the images.</p>

<p>To further optimize images and compress them I use <a href="">PNGGauntlet</a><a href="https://pnggauntlet.com/.">https://pnggauntlet.com/.</a> PNGGauntlet combines <a href="http://advsys.net/ken/util/pngout.htm">PNGOUT</a>, <a href="http://optipng.sourceforge.net/">OptiPNG</a> and DeflOpt and helps smash PNG&rsquo;s to the smallest size.</p>

<p><img src="http://rahulpnath.com/images/pnggauntlet.png" alt="PNG Gauntlet" class="center" /></p>

<p>PNGGauntlet provides options to configure the PNG output. You can play around with the options for the best output. I use the default options and has been working fine for me.</p>

<p>Check out <a href="https://pnggauntlet.com/">PNGGauntlet</a> to optimize images for the web.</p>
]]></content>
  </entry>
  
</feed>
